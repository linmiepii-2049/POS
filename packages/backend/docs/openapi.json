{
  "openapi": "3.0.0",
  "info": {
    "version": "1.0.0",
    "title": "POS 系統後端 API",
    "description": "POS 系統後端 API 文檔",
    "contact": {
      "name": "POS 系統開發團隊",
      "email": "dev@pos-system.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost:8787",
      "description": "開發環境"
    }
  ],
  "tags": [
    {
      "name": "System",
      "description": "系統相關端點"
    },
    {
      "name": "Data",
      "description": "資料查詢端點"
    },
    {
      "name": "Users",
      "description": "使用者管理端點"
    },
    {
      "name": "Products",
      "description": "產品管理端點"
    },
    {
      "name": "Coupons",
      "description": "優惠券管理端點"
    },
    {
      "name": "CouponCodes",
      "description": "優惠券代碼管理端點"
    },
    {
      "name": "Orders",
      "description": "訂單管理端點"
    },
    {
      "name": "Uploads",
      "description": "檔案上傳端點"
    },
    {
      "name": "Assets",
      "description": "檔案存取端點"
    }
  ],
  "components": {
    "schemas": {},
    "parameters": {}
  },
  "paths": {
    "/health": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "健康檢查",
        "description": "檢查系統健康狀態並回傳時間資訊",
        "responses": {
          "200": {
            "description": "健康狀態資訊",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "ok": {
                      "type": "boolean",
                      "description": "健康狀態"
                    },
                    "env": {
                      "type": "string",
                      "description": "環境名稱"
                    },
                    "git_sha": {
                      "type": "string",
                      "description": "Git commit SHA"
                    },
                    "d1_status": {
                      "type": "string",
                      "description": "D1 資料庫狀態"
                    },
                    "now_utc": {
                      "type": "string",
                      "description": "當前時間（UTC）"
                    },
                    "now_local": {
                      "type": "string",
                      "description": "本地時間（Asia/Taipei）"
                    }
                  },
                  "required": [
                    "ok",
                    "env",
                    "d1_status",
                    "now_utc",
                    "now_local"
                  ]
                }
              }
            }
          }
        },
        "operationId": "get--health"
      }
    },
    "/version": {
      "get": {
        "tags": [
          "System"
        ],
        "summary": "版本資訊",
        "description": "取得系統版本資訊",
        "responses": {
          "200": {
            "description": "版本資訊",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "version": {
                      "type": "string",
                      "description": "版本號"
                    },
                    "env": {
                      "type": "string",
                      "description": "環境名稱"
                    },
                    "git_sha": {
                      "type": "string",
                      "description": "Git commit SHA"
                    }
                  },
                  "required": [
                    "version",
                    "env"
                  ]
                }
              }
            }
          }
        },
        "operationId": "get--version"
      }
    },
    "/api/data": {
      "get": {
        "tags": [
          "Data"
        ],
        "summary": "取得各表資料摘要",
        "description": "列出系統中所有主要資料表的記錄數量和樣本資料",
        "responses": {
          "200": {
            "description": "成功取得資料摘要",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "table_name": {
                            "type": "string",
                            "description": "資料表名稱"
                          },
                          "total_count": {
                            "type": "number",
                            "description": "總筆數"
                          },
                          "sample_data": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "additionalProperties": {
                                "type": "string"
                              }
                            },
                            "description": "樣本資料（最多5筆）"
                          }
                        },
                        "required": [
                          "table_name",
                          "total_count",
                          "sample_data"
                        ]
                      },
                      "description": "各表資料摘要"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "查詢時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                },
                "example": {
                  "success": true,
                  "data": [
                    {
                      "table_name": "users",
                      "total_count": 4,
                      "sample_data": [
                        {
                          "id": "1",
                          "name": "管理員",
                          "role": "ADMIN"
                        }
                      ]
                    }
                  ],
                  "timestamp": "2025-01-22T10:00:00.000Z"
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "error": {
                      "type": "string"
                    },
                    "timestamp": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        },
        "operationId": "get--api-data"
      }
    },
    "/api/users": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "取得使用者列表",
        "description": "取得使用者列表，支援分頁、排序、搜尋和篩選",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "description": "頁碼 (從 1 開始)"
            },
            "required": false,
            "description": "頁碼 (從 1 開始)",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "description": "每頁筆數 (1-100)"
            },
            "required": false,
            "description": "每頁筆數 (1-100)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "id",
                "name",
                "phone",
                "created_at",
                "updated_at",
                "last_purchase_at",
                "current_month_spending",
                "last_month_spending"
              ],
              "default": "id",
              "description": "排序欄位"
            },
            "required": false,
            "description": "排序欄位",
            "name": "sortBy",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "asc",
              "description": "排序方向"
            },
            "required": false,
            "description": "排序方向",
            "name": "sortDir",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "姓名或手機號碼搜尋"
            },
            "required": false,
            "description": "姓名或手機號碼搜尋",
            "name": "nameOrPhone",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "nullable": true,
              "minimum": 0,
              "maximum": 1,
              "description": "啟用狀態篩選"
            },
            "required": false,
            "description": "啟用狀態篩選",
            "name": "is_active",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "建立時間起始 (台北時間)"
            },
            "required": false,
            "description": "建立時間起始 (台北時間)",
            "name": "from",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "建立時間結束 (台北時間)"
            },
            "required": false,
            "description": "建立時間結束 (台北時間)",
            "name": "to",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "成功取得使用者列表",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "使用者 ID"
                          },
                          "line_id": {
                            "type": "string",
                            "nullable": true,
                            "description": "LINE ID"
                          },
                          "name": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 100,
                            "description": "姓名"
                          },
                          "phone": {
                            "type": "string",
                            "nullable": true,
                            "pattern": "^09\\d{8}$",
                            "description": "手機號碼"
                          },
                          "role": {
                            "type": "string",
                            "enum": [
                              "CLIENT",
                              "ADMIN"
                            ],
                            "description": "使用者角色"
                          },
                          "is_active": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 1,
                            "description": "是否啟用 (0: 停用, 1: 啟用)"
                          },
                          "created_at": {
                            "type": "string",
                            "description": "建立時間 (UTC)"
                          },
                          "updated_at": {
                            "type": "string",
                            "description": "更新時間 (UTC)"
                          },
                          "last_purchase_at": {
                            "type": "string",
                            "nullable": true,
                            "description": "最後消費時間 (UTC)"
                          },
                          "current_month_spending": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "本月消費金額 (元)"
                          },
                          "last_month_spending": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "上月消費金額 (元)"
                          }
                        },
                        "required": [
                          "id",
                          "line_id",
                          "name",
                          "phone",
                          "role",
                          "is_active",
                          "created_at",
                          "updated_at",
                          "last_purchase_at",
                          "current_month_spending",
                          "last_month_spending"
                        ]
                      },
                      "description": "使用者列表"
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "當前頁碼"
                        },
                        "limit": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "每頁筆數"
                        },
                        "total": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總筆數"
                        },
                        "total_pages": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總頁數"
                        }
                      },
                      "required": [
                        "page",
                        "limit",
                        "total",
                        "total_pages"
                      ],
                      "description": "分頁資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "pagination",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        },
        "operationId": "get--api-users"
      },
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "建立使用者",
        "description": "建立新的使用者",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "line_id": {
                    "type": "string",
                    "description": "LINE ID"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 100,
                    "description": "姓名"
                  },
                  "phone": {
                    "anyOf": [
                      {
                        "type": "string",
                        "pattern": "^09\\d{8}$"
                      },
                      {
                        "type": "string",
                        "enum": [
                          ""
                        ]
                      }
                    ],
                    "description": "手機號碼"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "CLIENT",
                      "ADMIN"
                    ],
                    "default": "CLIENT",
                    "description": "使用者角色"
                  },
                  "is_active": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 1,
                    "default": 1,
                    "description": "是否啟用 (0: 停用, 1: 啟用)"
                  }
                },
                "required": [
                  "name"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "成功建立使用者",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "使用者 ID"
                        },
                        "line_id": {
                          "type": "string",
                          "nullable": true,
                          "description": "LINE ID"
                        },
                        "name": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 100,
                          "description": "姓名"
                        },
                        "phone": {
                          "type": "string",
                          "nullable": true,
                          "pattern": "^09\\d{8}$",
                          "description": "手機號碼"
                        },
                        "role": {
                          "type": "string",
                          "enum": [
                            "CLIENT",
                            "ADMIN"
                          ],
                          "description": "使用者角色"
                        },
                        "is_active": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 1,
                          "description": "是否啟用 (0: 停用, 1: 啟用)"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        },
                        "last_purchase_at": {
                          "type": "string",
                          "nullable": true,
                          "description": "最後消費時間 (UTC)"
                        },
                        "current_month_spending": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "本月消費金額 (元)"
                        },
                        "last_month_spending": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "上月消費金額 (元)"
                        }
                      },
                      "required": [
                        "id",
                        "line_id",
                        "name",
                        "phone",
                        "role",
                        "is_active",
                        "created_at",
                        "updated_at",
                        "last_purchase_at",
                        "current_month_spending",
                        "last_month_spending"
                      ],
                      "description": "建立的使用者資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "手機號碼或 LINE ID 已存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        },
        "operationId": "post--api-users"
      }
    },
    "/api/users/{id}": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "取得使用者詳細資訊",
        "description": "根據使用者 ID 取得詳細資訊，包含統計資料",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "使用者 ID"
            },
            "required": true,
            "description": "使用者 ID",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "成功取得使用者詳細資訊",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "使用者 ID"
                        },
                        "line_id": {
                          "type": "string",
                          "nullable": true,
                          "description": "LINE ID"
                        },
                        "name": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 100,
                          "description": "姓名"
                        },
                        "phone": {
                          "type": "string",
                          "nullable": true,
                          "pattern": "^09\\d{8}$",
                          "description": "手機號碼"
                        },
                        "role": {
                          "type": "string",
                          "enum": [
                            "CLIENT",
                            "ADMIN"
                          ],
                          "description": "使用者角色"
                        },
                        "is_active": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 1,
                          "description": "是否啟用 (0: 停用, 1: 啟用)"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        },
                        "last_purchase_at": {
                          "type": "string",
                          "nullable": true,
                          "description": "最後消費時間 (UTC)"
                        },
                        "current_month_spending": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "本月消費金額 (元)"
                        },
                        "last_month_spending": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "上月消費金額 (元)"
                        },
                        "stats": {
                          "type": "object",
                          "properties": {
                            "total_spent": {
                              "type": "integer",
                              "minimum": 0,
                              "description": "總消費金額 (元)"
                            },
                            "last_purchase_at": {
                              "type": "string",
                              "nullable": true,
                              "description": "最後購買時間 (UTC)"
                            },
                            "total_orders": {
                              "type": "integer",
                              "minimum": 0,
                              "description": "總訂單數"
                            }
                          },
                          "required": [
                            "total_spent",
                            "last_purchase_at",
                            "total_orders"
                          ],
                          "description": "使用者統計資訊"
                        }
                      },
                      "required": [
                        "id",
                        "line_id",
                        "name",
                        "phone",
                        "role",
                        "is_active",
                        "created_at",
                        "updated_at",
                        "last_purchase_at",
                        "current_month_spending",
                        "last_month_spending",
                        "stats"
                      ],
                      "description": "使用者詳細資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "使用者不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        },
        "operationId": "get--api-users--id-"
      },
      "put": {
        "tags": [
          "Users"
        ],
        "summary": "更新使用者",
        "description": "更新使用者資訊",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "使用者 ID"
            },
            "required": true,
            "description": "使用者 ID",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "line_id": {
                    "type": "string",
                    "description": "LINE ID"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 100,
                    "description": "姓名"
                  },
                  "phone": {
                    "anyOf": [
                      {
                        "type": "string",
                        "pattern": "^09\\d{8}$"
                      },
                      {
                        "type": "string",
                        "enum": [
                          ""
                        ]
                      }
                    ],
                    "description": "手機號碼"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "CLIENT",
                      "ADMIN"
                    ],
                    "description": "使用者角色"
                  },
                  "is_active": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 1,
                    "description": "是否啟用 (0: 停用, 1: 啟用)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "成功更新使用者",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "使用者 ID"
                        },
                        "line_id": {
                          "type": "string",
                          "nullable": true,
                          "description": "LINE ID"
                        },
                        "name": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 100,
                          "description": "姓名"
                        },
                        "phone": {
                          "type": "string",
                          "nullable": true,
                          "pattern": "^09\\d{8}$",
                          "description": "手機號碼"
                        },
                        "role": {
                          "type": "string",
                          "enum": [
                            "CLIENT",
                            "ADMIN"
                          ],
                          "description": "使用者角色"
                        },
                        "is_active": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 1,
                          "description": "是否啟用 (0: 停用, 1: 啟用)"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        },
                        "last_purchase_at": {
                          "type": "string",
                          "nullable": true,
                          "description": "最後消費時間 (UTC)"
                        },
                        "current_month_spending": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "本月消費金額 (元)"
                        },
                        "last_month_spending": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "上月消費金額 (元)"
                        }
                      },
                      "required": [
                        "id",
                        "line_id",
                        "name",
                        "phone",
                        "role",
                        "is_active",
                        "created_at",
                        "updated_at",
                        "last_purchase_at",
                        "current_month_spending",
                        "last_month_spending"
                      ],
                      "description": "更新的使用者資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "使用者不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "手機號碼或 LINE ID 已存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        },
        "operationId": "put--api-users--id-"
      },
      "delete": {
        "tags": [
          "Users"
        ],
        "summary": "刪除使用者",
        "description": "刪除使用者（僅限無訂單記錄的使用者）",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "使用者 ID"
            },
            "required": true,
            "description": "使用者 ID",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "成功刪除使用者",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "message": {
                      "type": "string",
                      "description": "刪除成功訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "message",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "使用者不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "無法刪除有訂單記錄的使用者",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        },
        "operationId": "delete--api-users--id-"
      }
    },
    "/api/users/{id}/coupons/owned": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "取得使用者擁有的優惠券",
        "description": "取得使用者擁有的優惠券列表，包含剩餘可用次數和有效期間",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "使用者 ID"
            },
            "required": true,
            "description": "使用者 ID",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "成功取得使用者擁有的優惠券",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "grant_id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "授權 ID"
                          },
                          "coupon_id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "優惠券 ID"
                          },
                          "coupon_code_id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "優惠券代碼 ID"
                          },
                          "coupon_name": {
                            "type": "string",
                            "description": "優惠券名稱"
                          },
                          "coupon_code": {
                            "type": "string",
                            "description": "優惠券代碼"
                          },
                          "discount_type": {
                            "type": "string",
                            "enum": [
                              "PERCENT",
                              "FIXED"
                            ],
                            "description": "折扣類型"
                          },
                          "percent_off_bps": {
                            "type": "integer",
                            "nullable": true,
                            "minimum": 0,
                            "maximum": 10000,
                            "description": "折扣百分比 (基點)"
                          },
                          "amount_off_twd": {
                            "type": "integer",
                            "nullable": true,
                            "minimum": 0,
                            "description": "固定折扣金額 (元)"
                          },
                          "min_order_twd": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "最低消費金額 (元)"
                          },
                          "starts_at": {
                            "type": "string",
                            "nullable": true,
                            "description": "優惠券開始時間 (UTC)"
                          },
                          "ends_at": {
                            "type": "string",
                            "nullable": true,
                            "description": "優惠券結束時間 (UTC)"
                          },
                          "allowed_uses": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "允許使用次數"
                          },
                          "used_count": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "已使用次數"
                          },
                          "remaining_uses": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "剩餘可用次數"
                          },
                          "granted_at": {
                            "type": "string",
                            "description": "授權時間 (UTC)"
                          },
                          "expires_at": {
                            "type": "string",
                            "nullable": true,
                            "description": "過期時間 (UTC)"
                          },
                          "is_active": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 1,
                            "description": "是否啟用"
                          }
                        },
                        "required": [
                          "grant_id",
                          "coupon_id",
                          "coupon_code_id",
                          "coupon_name",
                          "coupon_code",
                          "discount_type",
                          "percent_off_bps",
                          "amount_off_twd",
                          "min_order_twd",
                          "starts_at",
                          "ends_at",
                          "allowed_uses",
                          "used_count",
                          "remaining_uses",
                          "granted_at",
                          "expires_at",
                          "is_active"
                        ]
                      },
                      "description": "擁有的優惠券列表"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "使用者不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        },
        "operationId": "get--api-users--id--coupons-owned"
      }
    },
    "/api/user-by-phone": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "根據手機號碼查詢使用者",
        "description": "根據手機號碼查詢單一使用者，多筆結果返回 400，無結果返回 404",
        "operationId": "Users_GetByPhone",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "pattern": "^09\\d{8,9}$",
              "description": "手機號碼"
            },
            "required": true,
            "description": "手機號碼",
            "name": "phone",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "成功取得使用者資訊",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "使用者 ID"
                        },
                        "line_id": {
                          "type": "string",
                          "nullable": true,
                          "description": "LINE ID"
                        },
                        "name": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 100,
                          "description": "姓名"
                        },
                        "phone": {
                          "type": "string",
                          "nullable": true,
                          "pattern": "^09\\d{8}$",
                          "description": "手機號碼"
                        },
                        "role": {
                          "type": "string",
                          "enum": [
                            "CLIENT",
                            "ADMIN"
                          ],
                          "description": "使用者角色"
                        },
                        "is_active": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 1,
                          "description": "是否啟用 (0: 停用, 1: 啟用)"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        }
                      },
                      "required": [
                        "id",
                        "line_id",
                        "name",
                        "phone",
                        "role",
                        "is_active",
                        "created_at",
                        "updated_at"
                      ],
                      "description": "使用者資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "找到多筆使用者或請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "使用者不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/users/{id}/available-coupons": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "取得使用者可用優惠券",
        "description": "取得使用者授權的優惠券列表，包含可用性判斷和原因說明",
        "operationId": "Users_GetAvailableCoupons",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "使用者 ID"
            },
            "required": true,
            "description": "使用者 ID",
            "name": "id",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "nullable": true,
              "minimum": 0,
              "description": "當次購物金額 (元)"
            },
            "required": false,
            "description": "當次購物金額 (元)",
            "name": "order_amount",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "成功取得使用者可用優惠券",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "優惠券代碼 ID"
                          },
                          "grant_id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "授權 ID"
                          },
                          "coupon_id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "優惠券 ID"
                          },
                          "coupon_code_id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "優惠券代碼 ID"
                          },
                          "coupon_name": {
                            "type": "string",
                            "description": "優惠券名稱"
                          },
                          "coupon_code": {
                            "type": "string",
                            "description": "優惠券代碼"
                          },
                          "discount_type": {
                            "type": "string",
                            "enum": [
                              "PERCENT",
                              "FIXED"
                            ],
                            "description": "折扣類型"
                          },
                          "percent_off_bps": {
                            "type": "integer",
                            "nullable": true,
                            "minimum": 0,
                            "maximum": 10000,
                            "description": "折扣百分比 (基點)"
                          },
                          "amount_off_twd": {
                            "type": "integer",
                            "nullable": true,
                            "minimum": 0,
                            "description": "固定折扣金額 (元)"
                          },
                          "min_order_twd": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "最低消費金額 (元)"
                          },
                          "allowed_uses": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "允許使用次數"
                          },
                          "used_count": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "已使用次數"
                          },
                          "remaining_uses": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "剩餘可用次數"
                          },
                          "granted_at": {
                            "type": "string",
                            "description": "授權時間 (UTC)"
                          },
                          "expires_at": {
                            "type": "string",
                            "nullable": true,
                            "description": "過期時間 (UTC)"
                          },
                          "is_active": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 1,
                            "description": "是否啟用"
                          },
                          "isUsable": {
                            "type": "boolean",
                            "description": "是否可用"
                          },
                          "reason": {
                            "type": "string",
                            "nullable": true,
                            "description": "不可用原因（若不可用）"
                          }
                        },
                        "required": [
                          "id",
                          "grant_id",
                          "coupon_id",
                          "coupon_code_id",
                          "coupon_name",
                          "coupon_code",
                          "discount_type",
                          "percent_off_bps",
                          "amount_off_twd",
                          "min_order_twd",
                          "allowed_uses",
                          "used_count",
                          "remaining_uses",
                          "granted_at",
                          "expires_at",
                          "is_active",
                          "isUsable",
                          "reason"
                        ]
                      },
                      "description": "可用優惠券列表"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "使用者不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/products": {
      "get": {
        "tags": [
          "Products"
        ],
        "summary": "取得產品列表",
        "description": "取得產品列表，支援分頁、排序、搜尋和篩選",
        "operationId": "Products_List",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "description": "頁碼 (從 1 開始)"
            },
            "required": false,
            "description": "頁碼 (從 1 開始)",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "description": "每頁筆數 (1-100)"
            },
            "required": false,
            "description": "每頁筆數 (1-100)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "id",
                "sku",
                "name",
                "category",
                "list_price_twd",
                "unit_price_twd",
                "created_at",
                "updated_at",
                "current_month_sales",
                "last_month_sales"
              ],
              "default": "id",
              "description": "排序欄位"
            },
            "required": false,
            "description": "排序欄位",
            "name": "sortBy",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "asc",
              "description": "排序方向"
            },
            "required": false,
            "description": "排序方向",
            "name": "sortDir",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "SKU 或名稱搜尋"
            },
            "required": false,
            "description": "SKU 或名稱搜尋",
            "name": "search",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "分類篩選"
            },
            "required": false,
            "description": "分類篩選",
            "name": "category",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "nullable": true,
              "minimum": 0,
              "maximum": 1,
              "description": "啟用狀態篩選"
            },
            "required": false,
            "description": "啟用狀態篩選",
            "name": "is_active",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "建立時間起始 (台北時間)"
            },
            "required": false,
            "description": "建立時間起始 (台北時間)",
            "name": "from",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "建立時間結束 (台北時間)"
            },
            "required": false,
            "description": "建立時間結束 (台北時間)",
            "name": "to",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "成功取得產品列表",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "產品 ID"
                          },
                          "sku": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 50,
                            "description": "產品 SKU"
                          },
                          "category": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 100,
                            "description": "產品分類"
                          },
                          "name": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 200,
                            "description": "產品名稱"
                          },
                          "description": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 1000,
                            "description": "產品描述"
                          },
                          "img_url": {
                            "type": "string",
                            "nullable": true,
                            "format": "uri",
                            "description": "產品圖片 URL"
                          },
                          "list_price_twd": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "定價 (元)"
                          },
                          "unit_price_twd": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "單價 (元)"
                          },
                          "is_active": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 1,
                            "description": "是否啟用 (0: 停用, 1: 啟用)"
                          },
                          "created_at": {
                            "type": "string",
                            "description": "建立時間 (UTC)"
                          },
                          "updated_at": {
                            "type": "string",
                            "description": "更新時間 (UTC)"
                          },
                          "current_month_sales": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "本月賣出數量"
                          },
                          "last_month_sales": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "上月賣出數量"
                          }
                        },
                        "required": [
                          "id",
                          "sku",
                          "category",
                          "name",
                          "description",
                          "img_url",
                          "list_price_twd",
                          "unit_price_twd",
                          "is_active",
                          "created_at",
                          "updated_at",
                          "current_month_sales",
                          "last_month_sales"
                        ]
                      },
                      "description": "產品列表"
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "當前頁碼"
                        },
                        "limit": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "每頁筆數"
                        },
                        "total": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總筆數"
                        },
                        "total_pages": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總頁數"
                        }
                      },
                      "required": [
                        "page",
                        "limit",
                        "total",
                        "total_pages"
                      ],
                      "description": "分頁資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "pagination",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Products"
        ],
        "summary": "建立產品",
        "description": "建立新的產品",
        "operationId": "Products_Create",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "sku": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 50,
                    "description": "產品 SKU"
                  },
                  "category": {
                    "type": "string",
                    "maxLength": 100,
                    "description": "產品分類"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 200,
                    "description": "產品名稱"
                  },
                  "description": {
                    "type": "string",
                    "maxLength": 1000,
                    "description": "產品描述"
                  },
                  "img_url": {
                    "anyOf": [
                      {
                        "type": "string",
                        "format": "uri"
                      },
                      {
                        "type": "string",
                        "enum": [
                          ""
                        ]
                      }
                    ],
                    "description": "產品圖片 URL"
                  },
                  "list_price_twd": {
                    "type": "integer",
                    "minimum": 0,
                    "description": "定價 (元)"
                  },
                  "unit_price_twd": {
                    "type": "integer",
                    "minimum": 0,
                    "description": "單價 (元)"
                  },
                  "is_active": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 1,
                    "default": 1,
                    "description": "是否啟用 (0: 停用, 1: 啟用)"
                  }
                },
                "required": [
                  "sku",
                  "name",
                  "list_price_twd",
                  "unit_price_twd"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "成功建立產品",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "產品 ID"
                        },
                        "sku": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 50,
                          "description": "產品 SKU"
                        },
                        "category": {
                          "type": "string",
                          "nullable": true,
                          "maxLength": 100,
                          "description": "產品分類"
                        },
                        "name": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 200,
                          "description": "產品名稱"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true,
                          "maxLength": 1000,
                          "description": "產品描述"
                        },
                        "img_url": {
                          "type": "string",
                          "nullable": true,
                          "format": "uri",
                          "description": "產品圖片 URL"
                        },
                        "list_price_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "定價 (元)"
                        },
                        "unit_price_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "單價 (元)"
                        },
                        "is_active": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 1,
                          "description": "是否啟用 (0: 停用, 1: 啟用)"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        },
                        "current_month_sales": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "本月賣出數量"
                        },
                        "last_month_sales": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "上月賣出數量"
                        }
                      },
                      "required": [
                        "id",
                        "sku",
                        "category",
                        "name",
                        "description",
                        "img_url",
                        "list_price_twd",
                        "unit_price_twd",
                        "is_active",
                        "created_at",
                        "updated_at",
                        "current_month_sales",
                        "last_month_sales"
                      ],
                      "description": "建立的產品資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "SKU 已存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/products/categories": {
      "get": {
        "tags": [
          "Products"
        ],
        "summary": "取得產品分類列表",
        "description": "取得所有產品分類",
        "operationId": "Products_GetCategories",
        "responses": {
          "200": {
            "description": "成功取得產品分類列表",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "description": "分類列表"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/products/{id}": {
      "get": {
        "tags": [
          "Products"
        ],
        "summary": "取得產品詳細資訊",
        "description": "根據產品 ID 取得詳細資訊",
        "operationId": "Products_Get",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "產品 ID"
            },
            "required": true,
            "description": "產品 ID",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "成功取得產品詳細資訊",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "產品 ID"
                        },
                        "sku": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 50,
                          "description": "產品 SKU"
                        },
                        "category": {
                          "type": "string",
                          "nullable": true,
                          "maxLength": 100,
                          "description": "產品分類"
                        },
                        "name": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 200,
                          "description": "產品名稱"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true,
                          "maxLength": 1000,
                          "description": "產品描述"
                        },
                        "img_url": {
                          "type": "string",
                          "nullable": true,
                          "format": "uri",
                          "description": "產品圖片 URL"
                        },
                        "list_price_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "定價 (元)"
                        },
                        "unit_price_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "單價 (元)"
                        },
                        "is_active": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 1,
                          "description": "是否啟用 (0: 停用, 1: 啟用)"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        },
                        "current_month_sales": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "本月賣出數量"
                        },
                        "last_month_sales": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "上月賣出數量"
                        }
                      },
                      "required": [
                        "id",
                        "sku",
                        "category",
                        "name",
                        "description",
                        "img_url",
                        "list_price_twd",
                        "unit_price_twd",
                        "is_active",
                        "created_at",
                        "updated_at",
                        "current_month_sales",
                        "last_month_sales"
                      ],
                      "description": "產品詳細資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "產品不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Products"
        ],
        "summary": "更新產品",
        "description": "更新產品資訊",
        "operationId": "Products_Update",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "產品 ID"
            },
            "required": true,
            "description": "產品 ID",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "sku": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 50,
                    "description": "產品 SKU"
                  },
                  "category": {
                    "type": "string",
                    "maxLength": 100,
                    "description": "產品分類"
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 200,
                    "description": "產品名稱"
                  },
                  "description": {
                    "type": "string",
                    "maxLength": 1000,
                    "description": "產品描述"
                  },
                  "img_url": {
                    "anyOf": [
                      {
                        "type": "string",
                        "format": "uri"
                      },
                      {
                        "type": "string",
                        "enum": [
                          ""
                        ]
                      }
                    ],
                    "description": "產品圖片 URL"
                  },
                  "list_price_twd": {
                    "type": "integer",
                    "minimum": 0,
                    "description": "定價 (元)"
                  },
                  "unit_price_twd": {
                    "type": "integer",
                    "minimum": 0,
                    "description": "單價 (元)"
                  },
                  "is_active": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 1,
                    "description": "是否啟用 (0: 停用, 1: 啟用)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "成功更新產品",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "產品 ID"
                        },
                        "sku": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 50,
                          "description": "產品 SKU"
                        },
                        "category": {
                          "type": "string",
                          "nullable": true,
                          "maxLength": 100,
                          "description": "產品分類"
                        },
                        "name": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 200,
                          "description": "產品名稱"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true,
                          "maxLength": 1000,
                          "description": "產品描述"
                        },
                        "img_url": {
                          "type": "string",
                          "nullable": true,
                          "format": "uri",
                          "description": "產品圖片 URL"
                        },
                        "list_price_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "定價 (元)"
                        },
                        "unit_price_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "單價 (元)"
                        },
                        "is_active": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 1,
                          "description": "是否啟用 (0: 停用, 1: 啟用)"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        },
                        "current_month_sales": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "本月賣出數量"
                        },
                        "last_month_sales": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "上月賣出數量"
                        }
                      },
                      "required": [
                        "id",
                        "sku",
                        "category",
                        "name",
                        "description",
                        "img_url",
                        "list_price_twd",
                        "unit_price_twd",
                        "is_active",
                        "created_at",
                        "updated_at",
                        "current_month_sales",
                        "last_month_sales"
                      ],
                      "description": "更新的產品資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "產品不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "SKU 已存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Products"
        ],
        "summary": "刪除產品",
        "description": "刪除產品（僅限無訂單記錄的產品）",
        "operationId": "Products_Delete",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "產品 ID"
            },
            "required": true,
            "description": "產品 ID",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "成功刪除產品",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "message": {
                      "type": "string",
                      "description": "刪除成功訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "message",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "產品不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "無法刪除有訂單記錄的產品",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/coupons": {
      "get": {
        "tags": [
          "Coupons"
        ],
        "summary": "取得優惠券列表",
        "description": "取得優惠券列表，支援分頁、排序、搜尋和篩選",
        "operationId": "Coupons_List",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "description": "頁碼 (從 1 開始)"
            },
            "required": false,
            "description": "頁碼 (從 1 開始)",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "description": "每頁筆數 (1-100)"
            },
            "required": false,
            "description": "每頁筆數 (1-100)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "id",
                "name",
                "discount_type",
                "min_order_twd",
                "max_uses_total",
                "starts_at",
                "ends_at",
                "is_active",
                "created_at",
                "updated_at"
              ],
              "default": "id",
              "description": "排序欄位"
            },
            "required": false,
            "description": "排序欄位",
            "name": "sortBy",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "asc",
              "description": "排序方向"
            },
            "required": false,
            "description": "排序方向",
            "name": "sortDir",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "名稱搜尋"
            },
            "required": false,
            "description": "名稱搜尋",
            "name": "search",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "PERCENT",
                "FIXED"
              ],
              "description": "折扣類型篩選"
            },
            "required": false,
            "description": "折扣類型篩選",
            "name": "discount_type",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "nullable": true,
              "minimum": 0,
              "maximum": 1,
              "description": "啟用狀態篩選"
            },
            "required": false,
            "description": "啟用狀態篩選",
            "name": "is_active",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true,
              "description": "有效性篩選"
            },
            "required": false,
            "description": "有效性篩選",
            "name": "is_valid",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "建立時間起始 (台北時間)"
            },
            "required": false,
            "description": "建立時間起始 (台北時間)",
            "name": "from",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "建立時間結束 (台北時間)"
            },
            "required": false,
            "description": "建立時間結束 (台北時間)",
            "name": "to",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "成功取得優惠券列表",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "優惠券 ID"
                          },
                          "name": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 200,
                            "description": "優惠券名稱"
                          },
                          "description": {
                            "type": "string",
                            "nullable": true,
                            "maxLength": 500,
                            "description": "優惠券描述"
                          },
                          "discount_type": {
                            "type": "string",
                            "enum": [
                              "PERCENT",
                              "FIXED"
                            ],
                            "description": "折扣類型"
                          },
                          "percent_off_bps": {
                            "type": "integer",
                            "nullable": true,
                            "minimum": 0,
                            "maximum": 10000,
                            "description": "折扣百分比 (基點，100 = 1%，最大值 10000 = 100%)"
                          },
                          "amount_off_twd": {
                            "type": "integer",
                            "nullable": true,
                            "minimum": 0,
                            "description": "固定折扣金額 (元)"
                          },
                          "min_order_twd": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "最低消費金額 (元)"
                          },
                          "max_uses_total": {
                            "type": "integer",
                            "nullable": true,
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "全站總可用次數"
                          },
                          "starts_at": {
                            "type": "string",
                            "nullable": true,
                            "description": "開始時間 (UTC)"
                          },
                          "ends_at": {
                            "type": "string",
                            "nullable": true,
                            "description": "結束時間 (UTC)"
                          },
                          "is_active": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 1,
                            "description": "是否啟用 (0: 停用, 1: 啟用)"
                          },
                          "created_at": {
                            "type": "string",
                            "description": "建立時間 (UTC)"
                          },
                          "updated_at": {
                            "type": "string",
                            "description": "更新時間 (UTC)"
                          },
                          "total_redemptions": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "已兌換總次數"
                          },
                          "remaining_uses": {
                            "type": "integer",
                            "nullable": true,
                            "minimum": 0,
                            "description": "剩餘可用次數"
                          },
                          "starts_at_taipei": {
                            "type": "string",
                            "nullable": true,
                            "description": "開始時間 (台北時間)"
                          },
                          "ends_at_taipei": {
                            "type": "string",
                            "nullable": true,
                            "description": "結束時間 (台北時間)"
                          },
                          "created_at_taipei": {
                            "type": "string",
                            "description": "建立時間 (台北時間)"
                          },
                          "updated_at_taipei": {
                            "type": "string",
                            "description": "更新時間 (台北時間)"
                          },
                          "is_valid": {
                            "type": "boolean",
                            "description": "是否有效 (啟用且未過期)"
                          },
                          "is_expired": {
                            "type": "boolean",
                            "description": "是否已過期"
                          },
                          "is_not_started": {
                            "type": "boolean",
                            "description": "是否尚未開始"
                          },
                          "is_fully_redeemed": {
                            "type": "boolean",
                            "description": "是否已完全兌換"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "description",
                          "discount_type",
                          "percent_off_bps",
                          "amount_off_twd",
                          "min_order_twd",
                          "max_uses_total",
                          "starts_at",
                          "ends_at",
                          "is_active",
                          "created_at",
                          "updated_at",
                          "total_redemptions",
                          "remaining_uses",
                          "starts_at_taipei",
                          "ends_at_taipei",
                          "created_at_taipei",
                          "updated_at_taipei",
                          "is_valid",
                          "is_expired",
                          "is_not_started",
                          "is_fully_redeemed"
                        ]
                      },
                      "description": "優惠券列表"
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "當前頁碼"
                        },
                        "limit": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "每頁筆數"
                        },
                        "total": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總筆數"
                        },
                        "total_pages": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總頁數"
                        }
                      },
                      "required": [
                        "page",
                        "limit",
                        "total",
                        "total_pages"
                      ],
                      "description": "分頁資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "pagination",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Coupons"
        ],
        "summary": "建立優惠券",
        "description": "建立新的優惠券",
        "operationId": "Coupons_Create",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 200,
                    "description": "優惠券名稱"
                  },
                  "description": {
                    "type": "string",
                    "maxLength": 500,
                    "description": "優惠券描述"
                  },
                  "discount_type": {
                    "type": "string",
                    "enum": [
                      "PERCENT",
                      "FIXED"
                    ],
                    "description": "折扣類型"
                  },
                  "percent_off_bps": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 10000,
                    "description": "折扣百分比 (基點，100 = 1%，最大值 10000 = 100%)"
                  },
                  "amount_off_twd": {
                    "type": "integer",
                    "minimum": 0,
                    "description": "固定折扣金額 (元)"
                  },
                  "min_order_twd": {
                    "type": "integer",
                    "minimum": 0,
                    "default": 0,
                    "description": "最低消費金額 (元)"
                  },
                  "max_uses_total": {
                    "type": "integer",
                    "minimum": 0,
                    "exclusiveMinimum": true,
                    "description": "全站總可用次數"
                  },
                  "starts_at": {
                    "type": "string",
                    "description": "開始時間 (台北時間)"
                  },
                  "ends_at": {
                    "type": "string",
                    "description": "結束時間 (台北時間)"
                  },
                  "is_active": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 1,
                    "default": 1,
                    "description": "是否啟用 (0: 停用, 1: 啟用)"
                  }
                },
                "required": [
                  "name",
                  "discount_type"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "成功建立優惠券",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "優惠券 ID"
                        },
                        "name": {
                          "type": "string",
                          "nullable": true,
                          "maxLength": 200,
                          "description": "優惠券名稱"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true,
                          "maxLength": 500,
                          "description": "優惠券描述"
                        },
                        "discount_type": {
                          "type": "string",
                          "enum": [
                            "PERCENT",
                            "FIXED"
                          ],
                          "description": "折扣類型"
                        },
                        "percent_off_bps": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "maximum": 10000,
                          "description": "折扣百分比 (基點，100 = 1%，最大值 10000 = 100%)"
                        },
                        "amount_off_twd": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "description": "固定折扣金額 (元)"
                        },
                        "min_order_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "最低消費金額 (元)"
                        },
                        "max_uses_total": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "全站總可用次數"
                        },
                        "starts_at": {
                          "type": "string",
                          "nullable": true,
                          "description": "開始時間 (UTC)"
                        },
                        "ends_at": {
                          "type": "string",
                          "nullable": true,
                          "description": "結束時間 (UTC)"
                        },
                        "is_active": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 1,
                          "description": "是否啟用 (0: 停用, 1: 啟用)"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        },
                        "total_redemptions": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "已兌換總次數"
                        },
                        "remaining_uses": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "description": "剩餘可用次數"
                        },
                        "starts_at_taipei": {
                          "type": "string",
                          "nullable": true,
                          "description": "開始時間 (台北時間)"
                        },
                        "ends_at_taipei": {
                          "type": "string",
                          "nullable": true,
                          "description": "結束時間 (台北時間)"
                        },
                        "created_at_taipei": {
                          "type": "string",
                          "description": "建立時間 (台北時間)"
                        },
                        "updated_at_taipei": {
                          "type": "string",
                          "description": "更新時間 (台北時間)"
                        },
                        "is_valid": {
                          "type": "boolean",
                          "description": "是否有效 (啟用且未過期)"
                        },
                        "is_expired": {
                          "type": "boolean",
                          "description": "是否已過期"
                        },
                        "is_not_started": {
                          "type": "boolean",
                          "description": "是否尚未開始"
                        },
                        "is_fully_redeemed": {
                          "type": "boolean",
                          "description": "是否已完全兌換"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "description",
                        "discount_type",
                        "percent_off_bps",
                        "amount_off_twd",
                        "min_order_twd",
                        "max_uses_total",
                        "starts_at",
                        "ends_at",
                        "is_active",
                        "created_at",
                        "updated_at",
                        "total_redemptions",
                        "remaining_uses",
                        "starts_at_taipei",
                        "ends_at_taipei",
                        "created_at_taipei",
                        "updated_at_taipei",
                        "is_valid",
                        "is_expired",
                        "is_not_started",
                        "is_fully_redeemed"
                      ],
                      "description": "建立的優惠券資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/coupons/codes": {
      "get": {
        "tags": [
          "CouponCodes"
        ],
        "summary": "取得優惠券代碼列表",
        "description": "取得優惠券代碼列表，支援分頁、排序、搜尋和篩選",
        "operationId": "CouponCodes_List",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "description": "頁碼 (從 1 開始)"
            },
            "required": false,
            "description": "頁碼 (從 1 開始)",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "description": "每頁筆數 (1-100)"
            },
            "required": false,
            "description": "每頁筆數 (1-100)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "id",
                "code",
                "max_redemptions",
                "starts_at",
                "ends_at",
                "is_active",
                "created_at",
                "updated_at"
              ],
              "default": "id",
              "description": "排序欄位"
            },
            "required": false,
            "description": "排序欄位",
            "name": "sortBy",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "asc",
              "description": "排序方向"
            },
            "required": false,
            "description": "排序方向",
            "name": "sortDir",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "代碼搜尋"
            },
            "required": false,
            "description": "代碼搜尋",
            "name": "search",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "優惠券 ID 篩選"
            },
            "required": false,
            "description": "優惠券 ID 篩選",
            "name": "coupon_id",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "用戶 ID 篩選"
            },
            "required": false,
            "description": "用戶 ID 篩選",
            "name": "user_id",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "nullable": true,
              "minimum": 0,
              "maximum": 1,
              "description": "啟用狀態篩選"
            },
            "required": false,
            "description": "啟用狀態篩選",
            "name": "is_active",
            "in": "query"
          },
          {
            "schema": {
              "type": "boolean",
              "nullable": true,
              "description": "有效性篩選"
            },
            "required": false,
            "description": "有效性篩選",
            "name": "is_valid",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "建立時間起始 (台北時間)"
            },
            "required": false,
            "description": "建立時間起始 (台北時間)",
            "name": "from",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "建立時間結束 (台北時間)"
            },
            "required": false,
            "description": "建立時間結束 (台北時間)",
            "name": "to",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "成功取得優惠券代碼列表",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "優惠券代碼 ID"
                          },
                          "coupon_id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "優惠券 ID"
                          },
                          "code": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 50,
                            "description": "優惠券代碼"
                          },
                          "max_redemptions": {
                            "type": "integer",
                            "nullable": true,
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "單一代碼的可用總次數"
                          },
                          "starts_at": {
                            "type": "string",
                            "nullable": true,
                            "description": "開始時間 (UTC)"
                          },
                          "ends_at": {
                            "type": "string",
                            "nullable": true,
                            "description": "結束時間 (UTC)"
                          },
                          "expires_after_days": {
                            "type": "integer",
                            "nullable": true,
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "取得後有效天數"
                          },
                          "is_active": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 1,
                            "description": "是否啟用 (0: 停用, 1: 啟用)"
                          },
                          "created_at": {
                            "type": "string",
                            "description": "建立時間 (UTC)"
                          },
                          "updated_at": {
                            "type": "string",
                            "description": "更新時間 (UTC)"
                          },
                          "total_redemptions": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "已兌換次數"
                          },
                          "remaining_uses": {
                            "type": "integer",
                            "nullable": true,
                            "minimum": 0,
                            "description": "剩餘可用次數"
                          },
                          "starts_at_taipei": {
                            "type": "string",
                            "nullable": true,
                            "description": "開始時間 (台北時間)"
                          },
                          "ends_at_taipei": {
                            "type": "string",
                            "nullable": true,
                            "description": "結束時間 (台北時間)"
                          },
                          "created_at_taipei": {
                            "type": "string",
                            "description": "建立時間 (台北時間)"
                          },
                          "updated_at_taipei": {
                            "type": "string",
                            "description": "更新時間 (台北時間)"
                          },
                          "is_valid": {
                            "type": "boolean",
                            "description": "是否有效 (啟用且未過期)"
                          },
                          "is_expired": {
                            "type": "boolean",
                            "description": "是否已過期"
                          },
                          "is_not_started": {
                            "type": "boolean",
                            "description": "是否尚未開始"
                          },
                          "is_fully_redeemed": {
                            "type": "boolean",
                            "description": "是否已完全兌換"
                          }
                        },
                        "required": [
                          "id",
                          "coupon_id",
                          "code",
                          "max_redemptions",
                          "starts_at",
                          "ends_at",
                          "expires_after_days",
                          "is_active",
                          "created_at",
                          "updated_at",
                          "total_redemptions",
                          "remaining_uses",
                          "starts_at_taipei",
                          "ends_at_taipei",
                          "created_at_taipei",
                          "updated_at_taipei",
                          "is_valid",
                          "is_expired",
                          "is_not_started",
                          "is_fully_redeemed"
                        ]
                      },
                      "description": "優惠券代碼列表"
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "當前頁碼"
                        },
                        "limit": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "每頁筆數"
                        },
                        "total": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總筆數"
                        },
                        "total_pages": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總頁數"
                        }
                      },
                      "required": [
                        "page",
                        "limit",
                        "total",
                        "total_pages"
                      ],
                      "description": "分頁資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "pagination",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "CouponCodes"
        ],
        "summary": "建立優惠券代碼",
        "description": "建立新的優惠券代碼",
        "operationId": "CouponCodes_Create",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "coupon_id": {
                    "type": "integer",
                    "minimum": 0,
                    "exclusiveMinimum": true,
                    "description": "優惠券 ID"
                  },
                  "code": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 50,
                    "description": "優惠券代碼"
                  },
                  "max_redemptions": {
                    "type": "integer",
                    "minimum": 0,
                    "exclusiveMinimum": true,
                    "description": "單一代碼的可用總次數"
                  },
                  "starts_at": {
                    "type": "string",
                    "nullable": true,
                    "description": "開始時間 (台北時間)"
                  },
                  "ends_at": {
                    "type": "string",
                    "nullable": true,
                    "description": "結束時間 (台北時間)"
                  },
                  "expires_after_days": {
                    "type": "integer",
                    "minimum": 0,
                    "exclusiveMinimum": true,
                    "description": "取得後有效天數"
                  },
                  "is_active": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 1,
                    "default": 1,
                    "description": "是否啟用 (0: 停用, 1: 啟用)"
                  }
                },
                "required": [
                  "coupon_id",
                  "code",
                  "max_redemptions"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "成功建立優惠券代碼",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "優惠券代碼 ID"
                        },
                        "coupon_id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "優惠券 ID"
                        },
                        "code": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 50,
                          "description": "優惠券代碼"
                        },
                        "max_redemptions": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "單一代碼的可用總次數"
                        },
                        "starts_at": {
                          "type": "string",
                          "nullable": true,
                          "description": "開始時間 (UTC)"
                        },
                        "ends_at": {
                          "type": "string",
                          "nullable": true,
                          "description": "結束時間 (UTC)"
                        },
                        "expires_after_days": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "取得後有效天數"
                        },
                        "is_active": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 1,
                          "description": "是否啟用 (0: 停用, 1: 啟用)"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        },
                        "total_redemptions": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "已兌換次數"
                        },
                        "remaining_uses": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "description": "剩餘可用次數"
                        },
                        "starts_at_taipei": {
                          "type": "string",
                          "nullable": true,
                          "description": "開始時間 (台北時間)"
                        },
                        "ends_at_taipei": {
                          "type": "string",
                          "nullable": true,
                          "description": "結束時間 (台北時間)"
                        },
                        "created_at_taipei": {
                          "type": "string",
                          "description": "建立時間 (台北時間)"
                        },
                        "updated_at_taipei": {
                          "type": "string",
                          "description": "更新時間 (台北時間)"
                        },
                        "is_valid": {
                          "type": "boolean",
                          "description": "是否有效 (啟用且未過期)"
                        },
                        "is_expired": {
                          "type": "boolean",
                          "description": "是否已過期"
                        },
                        "is_not_started": {
                          "type": "boolean",
                          "description": "是否尚未開始"
                        },
                        "is_fully_redeemed": {
                          "type": "boolean",
                          "description": "是否已完全兌換"
                        }
                      },
                      "required": [
                        "id",
                        "coupon_id",
                        "code",
                        "max_redemptions",
                        "starts_at",
                        "ends_at",
                        "expires_after_days",
                        "is_active",
                        "created_at",
                        "updated_at",
                        "total_redemptions",
                        "remaining_uses",
                        "starts_at_taipei",
                        "ends_at_taipei",
                        "created_at_taipei",
                        "updated_at_taipei",
                        "is_valid",
                        "is_expired",
                        "is_not_started",
                        "is_fully_redeemed"
                      ],
                      "description": "建立的優惠券代碼資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "優惠券不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "優惠券代碼已存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/coupons/{id}": {
      "get": {
        "tags": [
          "Coupons"
        ],
        "summary": "取得優惠券詳細資訊",
        "description": "根據優惠券 ID 取得詳細資訊",
        "operationId": "Coupons_Get",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "優惠券 ID"
            },
            "required": true,
            "description": "優惠券 ID",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "成功取得優惠券詳細資訊",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "優惠券 ID"
                        },
                        "name": {
                          "type": "string",
                          "nullable": true,
                          "maxLength": 200,
                          "description": "優惠券名稱"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true,
                          "maxLength": 500,
                          "description": "優惠券描述"
                        },
                        "discount_type": {
                          "type": "string",
                          "enum": [
                            "PERCENT",
                            "FIXED"
                          ],
                          "description": "折扣類型"
                        },
                        "percent_off_bps": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "maximum": 10000,
                          "description": "折扣百分比 (基點，100 = 1%，最大值 10000 = 100%)"
                        },
                        "amount_off_twd": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "description": "固定折扣金額 (元)"
                        },
                        "min_order_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "最低消費金額 (元)"
                        },
                        "max_uses_total": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "全站總可用次數"
                        },
                        "starts_at": {
                          "type": "string",
                          "nullable": true,
                          "description": "開始時間 (UTC)"
                        },
                        "ends_at": {
                          "type": "string",
                          "nullable": true,
                          "description": "結束時間 (UTC)"
                        },
                        "is_active": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 1,
                          "description": "是否啟用 (0: 停用, 1: 啟用)"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        },
                        "total_redemptions": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "已兌換總次數"
                        },
                        "remaining_uses": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "description": "剩餘可用次數"
                        },
                        "starts_at_taipei": {
                          "type": "string",
                          "nullable": true,
                          "description": "開始時間 (台北時間)"
                        },
                        "ends_at_taipei": {
                          "type": "string",
                          "nullable": true,
                          "description": "結束時間 (台北時間)"
                        },
                        "created_at_taipei": {
                          "type": "string",
                          "description": "建立時間 (台北時間)"
                        },
                        "updated_at_taipei": {
                          "type": "string",
                          "description": "更新時間 (台北時間)"
                        },
                        "is_valid": {
                          "type": "boolean",
                          "description": "是否有效 (啟用且未過期)"
                        },
                        "is_expired": {
                          "type": "boolean",
                          "description": "是否已過期"
                        },
                        "is_not_started": {
                          "type": "boolean",
                          "description": "是否尚未開始"
                        },
                        "is_fully_redeemed": {
                          "type": "boolean",
                          "description": "是否已完全兌換"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "description",
                        "discount_type",
                        "percent_off_bps",
                        "amount_off_twd",
                        "min_order_twd",
                        "max_uses_total",
                        "starts_at",
                        "ends_at",
                        "is_active",
                        "created_at",
                        "updated_at",
                        "total_redemptions",
                        "remaining_uses",
                        "starts_at_taipei",
                        "ends_at_taipei",
                        "created_at_taipei",
                        "updated_at_taipei",
                        "is_valid",
                        "is_expired",
                        "is_not_started",
                        "is_fully_redeemed"
                      ],
                      "description": "優惠券詳細資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "優惠券不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Coupons"
        ],
        "summary": "更新優惠券",
        "description": "更新優惠券資訊",
        "operationId": "Coupons_Update",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "優惠券 ID"
            },
            "required": true,
            "description": "優惠券 ID",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 200,
                    "description": "優惠券名稱"
                  },
                  "description": {
                    "type": "string",
                    "maxLength": 500,
                    "description": "優惠券描述"
                  },
                  "discount_type": {
                    "type": "string",
                    "enum": [
                      "PERCENT",
                      "FIXED"
                    ],
                    "description": "折扣類型"
                  },
                  "percent_off_bps": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 10000,
                    "description": "折扣百分比 (基點，100 = 1%，最大值 10000 = 100%)"
                  },
                  "amount_off_twd": {
                    "type": "integer",
                    "minimum": 0,
                    "description": "固定折扣金額 (元)"
                  },
                  "min_order_twd": {
                    "type": "integer",
                    "minimum": 0,
                    "description": "最低消費金額 (元)"
                  },
                  "max_uses_total": {
                    "type": "integer",
                    "minimum": 0,
                    "exclusiveMinimum": true,
                    "description": "全站總可用次數"
                  },
                  "max_redemptions": {
                    "type": "integer",
                    "minimum": 0,
                    "exclusiveMinimum": true,
                    "description": "代碼總量限制"
                  },
                  "starts_at": {
                    "type": "string",
                    "description": "開始時間 (台北時間)"
                  },
                  "ends_at": {
                    "type": "string",
                    "description": "結束時間 (台北時間)"
                  },
                  "is_active": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 1,
                    "description": "是否啟用 (0: 停用, 1: 啟用)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "成功更新優惠券",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "優惠券 ID"
                        },
                        "name": {
                          "type": "string",
                          "nullable": true,
                          "maxLength": 200,
                          "description": "優惠券名稱"
                        },
                        "description": {
                          "type": "string",
                          "nullable": true,
                          "maxLength": 500,
                          "description": "優惠券描述"
                        },
                        "discount_type": {
                          "type": "string",
                          "enum": [
                            "PERCENT",
                            "FIXED"
                          ],
                          "description": "折扣類型"
                        },
                        "percent_off_bps": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "maximum": 10000,
                          "description": "折扣百分比 (基點，100 = 1%，最大值 10000 = 100%)"
                        },
                        "amount_off_twd": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "description": "固定折扣金額 (元)"
                        },
                        "min_order_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "最低消費金額 (元)"
                        },
                        "max_uses_total": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "全站總可用次數"
                        },
                        "starts_at": {
                          "type": "string",
                          "nullable": true,
                          "description": "開始時間 (UTC)"
                        },
                        "ends_at": {
                          "type": "string",
                          "nullable": true,
                          "description": "結束時間 (UTC)"
                        },
                        "is_active": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 1,
                          "description": "是否啟用 (0: 停用, 1: 啟用)"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        },
                        "total_redemptions": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "已兌換總次數"
                        },
                        "remaining_uses": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "description": "剩餘可用次數"
                        },
                        "starts_at_taipei": {
                          "type": "string",
                          "nullable": true,
                          "description": "開始時間 (台北時間)"
                        },
                        "ends_at_taipei": {
                          "type": "string",
                          "nullable": true,
                          "description": "結束時間 (台北時間)"
                        },
                        "created_at_taipei": {
                          "type": "string",
                          "description": "建立時間 (台北時間)"
                        },
                        "updated_at_taipei": {
                          "type": "string",
                          "description": "更新時間 (台北時間)"
                        },
                        "is_valid": {
                          "type": "boolean",
                          "description": "是否有效 (啟用且未過期)"
                        },
                        "is_expired": {
                          "type": "boolean",
                          "description": "是否已過期"
                        },
                        "is_not_started": {
                          "type": "boolean",
                          "description": "是否尚未開始"
                        },
                        "is_fully_redeemed": {
                          "type": "boolean",
                          "description": "是否已完全兌換"
                        }
                      },
                      "required": [
                        "id",
                        "name",
                        "description",
                        "discount_type",
                        "percent_off_bps",
                        "amount_off_twd",
                        "min_order_twd",
                        "max_uses_total",
                        "starts_at",
                        "ends_at",
                        "is_active",
                        "created_at",
                        "updated_at",
                        "total_redemptions",
                        "remaining_uses",
                        "starts_at_taipei",
                        "ends_at_taipei",
                        "created_at_taipei",
                        "updated_at_taipei",
                        "is_valid",
                        "is_expired",
                        "is_not_started",
                        "is_fully_redeemed"
                      ],
                      "description": "更新的優惠券資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "優惠券不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Coupons"
        ],
        "summary": "刪除優惠券",
        "description": "刪除優惠券（僅限無優惠券代碼和兌換記錄的優惠券）",
        "operationId": "Coupons_Delete",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "優惠券 ID"
            },
            "required": true,
            "description": "優惠券 ID",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "成功刪除優惠券",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "message": {
                      "type": "string",
                      "description": "刪除成功訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "message",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "優惠券不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "無法刪除有優惠券代碼或兌換記錄的優惠券",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/coupons/codes/{id}": {
      "get": {
        "tags": [
          "CouponCodes"
        ],
        "summary": "取得優惠券代碼詳細資訊",
        "description": "根據優惠券代碼 ID 取得詳細資訊",
        "operationId": "CouponCodes_Get",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "優惠券代碼 ID"
            },
            "required": true,
            "description": "優惠券代碼 ID",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "成功取得優惠券代碼詳細資訊",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "優惠券代碼 ID"
                        },
                        "coupon_id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "優惠券 ID"
                        },
                        "code": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 50,
                          "description": "優惠券代碼"
                        },
                        "max_redemptions": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "單一代碼的可用總次數"
                        },
                        "starts_at": {
                          "type": "string",
                          "nullable": true,
                          "description": "開始時間 (UTC)"
                        },
                        "ends_at": {
                          "type": "string",
                          "nullable": true,
                          "description": "結束時間 (UTC)"
                        },
                        "expires_after_days": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "取得後有效天數"
                        },
                        "is_active": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 1,
                          "description": "是否啟用 (0: 停用, 1: 啟用)"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        },
                        "total_redemptions": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "已兌換次數"
                        },
                        "remaining_uses": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "description": "剩餘可用次數"
                        },
                        "starts_at_taipei": {
                          "type": "string",
                          "nullable": true,
                          "description": "開始時間 (台北時間)"
                        },
                        "ends_at_taipei": {
                          "type": "string",
                          "nullable": true,
                          "description": "結束時間 (台北時間)"
                        },
                        "created_at_taipei": {
                          "type": "string",
                          "description": "建立時間 (台北時間)"
                        },
                        "updated_at_taipei": {
                          "type": "string",
                          "description": "更新時間 (台北時間)"
                        },
                        "is_valid": {
                          "type": "boolean",
                          "description": "是否有效 (啟用且未過期)"
                        },
                        "is_expired": {
                          "type": "boolean",
                          "description": "是否已過期"
                        },
                        "is_not_started": {
                          "type": "boolean",
                          "description": "是否尚未開始"
                        },
                        "is_fully_redeemed": {
                          "type": "boolean",
                          "description": "是否已完全兌換"
                        }
                      },
                      "required": [
                        "id",
                        "coupon_id",
                        "code",
                        "max_redemptions",
                        "starts_at",
                        "ends_at",
                        "expires_after_days",
                        "is_active",
                        "created_at",
                        "updated_at",
                        "total_redemptions",
                        "remaining_uses",
                        "starts_at_taipei",
                        "ends_at_taipei",
                        "created_at_taipei",
                        "updated_at_taipei",
                        "is_valid",
                        "is_expired",
                        "is_not_started",
                        "is_fully_redeemed"
                      ],
                      "description": "優惠券代碼詳細資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "優惠券代碼不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "CouponCodes"
        ],
        "summary": "更新優惠券代碼",
        "description": "更新優惠券代碼資訊",
        "operationId": "CouponCodes_Update",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "優惠券代碼 ID"
            },
            "required": true,
            "description": "優惠券代碼 ID",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "code": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 50,
                    "description": "優惠券代碼"
                  },
                  "max_redemptions": {
                    "type": "integer",
                    "minimum": 0,
                    "exclusiveMinimum": true,
                    "description": "單一代碼的可用總次數"
                  },
                  "starts_at": {
                    "type": "string",
                    "nullable": true,
                    "description": "開始時間 (台北時間)"
                  },
                  "ends_at": {
                    "type": "string",
                    "nullable": true,
                    "description": "結束時間 (台北時間)"
                  },
                  "is_active": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 1,
                    "description": "是否啟用 (0: 停用, 1: 啟用)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "成功更新優惠券代碼",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "優惠券代碼 ID"
                        },
                        "coupon_id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "優惠券 ID"
                        },
                        "code": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 50,
                          "description": "優惠券代碼"
                        },
                        "max_redemptions": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "單一代碼的可用總次數"
                        },
                        "starts_at": {
                          "type": "string",
                          "nullable": true,
                          "description": "開始時間 (UTC)"
                        },
                        "ends_at": {
                          "type": "string",
                          "nullable": true,
                          "description": "結束時間 (UTC)"
                        },
                        "expires_after_days": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "取得後有效天數"
                        },
                        "is_active": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 1,
                          "description": "是否啟用 (0: 停用, 1: 啟用)"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        },
                        "total_redemptions": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "已兌換次數"
                        },
                        "remaining_uses": {
                          "type": "integer",
                          "nullable": true,
                          "minimum": 0,
                          "description": "剩餘可用次數"
                        },
                        "starts_at_taipei": {
                          "type": "string",
                          "nullable": true,
                          "description": "開始時間 (台北時間)"
                        },
                        "ends_at_taipei": {
                          "type": "string",
                          "nullable": true,
                          "description": "結束時間 (台北時間)"
                        },
                        "created_at_taipei": {
                          "type": "string",
                          "description": "建立時間 (台北時間)"
                        },
                        "updated_at_taipei": {
                          "type": "string",
                          "description": "更新時間 (台北時間)"
                        },
                        "is_valid": {
                          "type": "boolean",
                          "description": "是否有效 (啟用且未過期)"
                        },
                        "is_expired": {
                          "type": "boolean",
                          "description": "是否已過期"
                        },
                        "is_not_started": {
                          "type": "boolean",
                          "description": "是否尚未開始"
                        },
                        "is_fully_redeemed": {
                          "type": "boolean",
                          "description": "是否已完全兌換"
                        }
                      },
                      "required": [
                        "id",
                        "coupon_id",
                        "code",
                        "max_redemptions",
                        "starts_at",
                        "ends_at",
                        "expires_after_days",
                        "is_active",
                        "created_at",
                        "updated_at",
                        "total_redemptions",
                        "remaining_uses",
                        "starts_at_taipei",
                        "ends_at_taipei",
                        "created_at_taipei",
                        "updated_at_taipei",
                        "is_valid",
                        "is_expired",
                        "is_not_started",
                        "is_fully_redeemed"
                      ],
                      "description": "更新的優惠券代碼資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "優惠券代碼不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "優惠券代碼已存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "CouponCodes"
        ],
        "summary": "刪除優惠券代碼",
        "description": "刪除優惠券代碼（僅限無兌換記錄和授權記錄的優惠券代碼）",
        "operationId": "CouponCodes_Delete",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "優惠券代碼 ID"
            },
            "required": true,
            "description": "優惠券代碼 ID",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "成功刪除優惠券代碼",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "message": {
                      "type": "string",
                      "description": "刪除成功訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "message",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "優惠券代碼不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "無法刪除有兌換記錄或授權記錄的優惠券代碼",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/coupons/grants": {
      "post": {
        "tags": [
          "Coupons"
        ],
        "summary": "建立優惠券授權",
        "description": "為指定用戶建立優惠券代碼的授權記錄",
        "operationId": "Coupons_CreateGrant",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "coupon_code_id": {
                    "type": "integer",
                    "minimum": 0,
                    "exclusiveMinimum": true,
                    "description": "優惠券代碼 ID"
                  },
                  "user_id": {
                    "type": "integer",
                    "minimum": 0,
                    "exclusiveMinimum": true,
                    "description": "用戶 ID"
                  },
                  "allowed_uses": {
                    "type": "integer",
                    "minimum": 1,
                    "default": 1,
                    "description": "允許使用次數"
                  },
                  "expires_at": {
                    "type": "string",
                    "description": "授權過期時間 (台北時間)"
                  }
                },
                "required": [
                  "coupon_code_id",
                  "user_id"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "成功建立優惠券授權",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "授權 ID"
                        },
                        "coupon_code_id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "優惠券代碼 ID"
                        },
                        "user_id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "用戶 ID"
                        },
                        "allowed_uses": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "允許使用次數"
                        },
                        "used_count": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "已使用次數"
                        },
                        "granted_at": {
                          "type": "string",
                          "description": "授權時間 (UTC)"
                        },
                        "expires_at": {
                          "type": "string",
                          "nullable": true,
                          "description": "授權過期時間 (UTC)"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        }
                      },
                      "required": [
                        "id",
                        "coupon_code_id",
                        "user_id",
                        "allowed_uses",
                        "used_count",
                        "granted_at",
                        "expires_at",
                        "created_at",
                        "updated_at"
                      ],
                      "description": "建立的優惠券授權資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "授權已存在或相關資源不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/coupons/grants/list": {
      "get": {
        "tags": [
          "Coupons"
        ],
        "summary": "取得優惠券授權列表",
        "description": "取得優惠券授權列表，支援分頁和篩選",
        "operationId": "Coupons_ListGrants",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "description": "頁碼 (從 1 開始)"
            },
            "required": false,
            "description": "頁碼 (從 1 開始)",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "description": "每頁筆數 (1-100)"
            },
            "required": false,
            "description": "每頁筆數 (1-100)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "用戶 ID"
            },
            "required": false,
            "description": "用戶 ID",
            "name": "user_id",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "優惠券代碼 ID"
            },
            "required": false,
            "description": "優惠券代碼 ID",
            "name": "coupon_code_id",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "成功取得優惠券授權列表",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "授權 ID"
                          },
                          "coupon_code_id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "優惠券代碼 ID"
                          },
                          "user_id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "用戶 ID"
                          },
                          "allowed_uses": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "允許使用次數"
                          },
                          "used_count": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "已使用次數"
                          },
                          "granted_at": {
                            "type": "string",
                            "description": "授權時間 (UTC)"
                          },
                          "expires_at": {
                            "type": "string",
                            "nullable": true,
                            "description": "授權過期時間 (UTC)"
                          },
                          "created_at": {
                            "type": "string",
                            "description": "建立時間 (UTC)"
                          },
                          "updated_at": {
                            "type": "string",
                            "description": "更新時間 (UTC)"
                          }
                        },
                        "required": [
                          "id",
                          "coupon_code_id",
                          "user_id",
                          "allowed_uses",
                          "used_count",
                          "granted_at",
                          "expires_at",
                          "created_at",
                          "updated_at"
                        ]
                      },
                      "description": "優惠券授權列表"
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "當前頁碼"
                        },
                        "limit": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "每頁筆數"
                        },
                        "total": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總筆數"
                        },
                        "total_pages": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總頁數"
                        }
                      },
                      "required": [
                        "page",
                        "limit",
                        "total",
                        "total_pages"
                      ],
                      "description": "分頁資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "pagination",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/coupons/grants/{id}": {
      "put": {
        "tags": [
          "Coupons"
        ],
        "summary": "更新優惠券授權",
        "description": "更新優惠券授權資訊",
        "operationId": "Coupons_UpdateGrant",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "授權 ID"
            },
            "required": true,
            "description": "授權 ID",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "granted_at": {
                    "type": "string",
                    "description": "授權時間 (UTC)"
                  },
                  "expires_at": {
                    "type": "string",
                    "description": "過期時間 (UTC)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "是否成功"
                    },
                    "data": {
                      "nullable": true,
                      "description": "更新後的授權資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "授權不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/orders": {
      "get": {
        "tags": [
          "Orders"
        ],
        "summary": "取得訂單列表",
        "description": "取得訂單列表，支援分頁、排序、篩選",
        "operationId": "Orders_List",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "description": "頁碼 (從 1 開始)"
            },
            "required": false,
            "description": "頁碼 (從 1 開始)",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "description": "每頁筆數 (1-100)"
            },
            "required": false,
            "description": "每頁筆數 (1-100)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "id",
                "order_number",
                "user_id",
                "subtotal_twd",
                "discount_twd",
                "total_twd",
                "status",
                "created_at",
                "updated_at"
              ],
              "default": "id",
              "description": "排序欄位"
            },
            "required": false,
            "description": "排序欄位",
            "name": "sortBy",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc",
              "description": "排序方向"
            },
            "required": false,
            "description": "排序方向",
            "name": "sortDir",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "created",
                "confirmed",
                "paid",
                "cancelled"
              ],
              "description": "訂單狀態篩選"
            },
            "required": false,
            "description": "訂單狀態篩選",
            "name": "status",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "使用者 ID 篩選"
            },
            "required": false,
            "description": "使用者 ID 篩選",
            "name": "user_id",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "建立時間起始 (台北時間)"
            },
            "required": false,
            "description": "建立時間起始 (台北時間)",
            "name": "from",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "建立時間結束 (台北時間)"
            },
            "required": false,
            "description": "建立時間結束 (台北時間)",
            "name": "to",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "成功取得訂單列表",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "訂單 ID"
                          },
                          "order_number": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 50,
                            "description": "訂單編號"
                          },
                          "user_id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "使用者 ID"
                          },
                          "subtotal_twd": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "小計 (元)"
                          },
                          "discount_twd": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "折扣金額 (元)"
                          },
                          "total_twd": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "總金額 (元)"
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "created",
                              "confirmed",
                              "paid",
                              "cancelled"
                            ],
                            "description": "訂單狀態"
                          },
                          "created_at": {
                            "type": "string",
                            "description": "建立時間 (UTC)"
                          },
                          "updated_at": {
                            "type": "string",
                            "description": "更新時間 (UTC)"
                          },
                          "created_at_taipei": {
                            "type": "string",
                            "description": "建立時間 (台北時間)"
                          },
                          "updated_at_taipei": {
                            "type": "string",
                            "description": "更新時間 (台北時間)"
                          }
                        },
                        "required": [
                          "id",
                          "order_number",
                          "user_id",
                          "subtotal_twd",
                          "discount_twd",
                          "total_twd",
                          "status",
                          "created_at",
                          "updated_at",
                          "created_at_taipei",
                          "updated_at_taipei"
                        ]
                      },
                      "description": "訂單列表"
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "當前頁碼"
                        },
                        "limit": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "每頁筆數"
                        },
                        "total": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總筆數"
                        },
                        "total_pages": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總頁數"
                        }
                      },
                      "required": [
                        "page",
                        "limit",
                        "total",
                        "total_pages"
                      ],
                      "description": "分頁資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "pagination",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Orders"
        ],
        "summary": "建立訂單",
        "description": "建立新的訂單，支援優惠券使用",
        "operationId": "Orders_Create",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "user_id": {
                    "type": "integer",
                    "minimum": 0,
                    "exclusiveMinimum": true,
                    "description": "使用者 ID（可選）"
                  },
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "product_id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "產品 ID"
                        },
                        "quantity": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "數量"
                        }
                      },
                      "required": [
                        "product_id",
                        "quantity"
                      ]
                    },
                    "minItems": 1,
                    "description": "訂單項目列表"
                  },
                  "coupon_code_id": {
                    "type": "integer",
                    "minimum": 0,
                    "exclusiveMinimum": true,
                    "description": "優惠券代碼 ID（可選）"
                  }
                },
                "required": [
                  "items"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "成功建立訂單",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "訂單 ID"
                        },
                        "order_number": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 50,
                          "description": "訂單編號"
                        },
                        "user_id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "使用者 ID"
                        },
                        "subtotal_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "小計 (元)"
                        },
                        "discount_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "折扣金額 (元)"
                        },
                        "total_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總金額 (元)"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "created",
                            "confirmed",
                            "paid",
                            "cancelled"
                          ],
                          "description": "訂單狀態"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        },
                        "created_at_taipei": {
                          "type": "string",
                          "description": "建立時間 (台北時間)"
                        },
                        "updated_at_taipei": {
                          "type": "string",
                          "description": "更新時間 (台北時間)"
                        },
                        "order_items": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "訂單項目 ID"
                              },
                              "order_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "訂單 ID"
                              },
                              "product_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "產品 ID"
                              },
                              "product_name_snapshot": {
                                "type": "string",
                                "nullable": true,
                                "description": "下單時產品名稱快照"
                              },
                              "quantity": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "數量"
                              },
                              "unit_price_twd": {
                                "type": "integer",
                                "minimum": 0,
                                "description": "單價 (元)"
                              },
                              "total_twd": {
                                "type": "integer",
                                "minimum": 0,
                                "description": "小計 (元)"
                              },
                              "created_at": {
                                "type": "string",
                                "description": "建立時間 (UTC)"
                              },
                              "updated_at": {
                                "type": "string",
                                "description": "更新時間 (UTC)"
                              }
                            },
                            "required": [
                              "id",
                              "order_id",
                              "product_id",
                              "product_name_snapshot",
                              "quantity",
                              "unit_price_twd",
                              "total_twd",
                              "created_at",
                              "updated_at"
                            ]
                          },
                          "description": "訂單項目列表"
                        },
                        "coupon_redemptions": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "兌換紀錄 ID"
                              },
                              "order_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "訂單 ID"
                              },
                              "coupon_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "優惠券 ID"
                              },
                              "coupon_code_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "優惠券代碼 ID"
                              },
                              "user_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "使用者 ID"
                              },
                              "redeemed_at": {
                                "type": "string",
                                "description": "兌換時間 (UTC)"
                              },
                              "amount_applied_twd": {
                                "type": "integer",
                                "minimum": 0,
                                "description": "實際折扣金額 (元)"
                              },
                              "created_at": {
                                "type": "string",
                                "description": "建立時間 (UTC)"
                              },
                              "updated_at": {
                                "type": "string",
                                "description": "更新時間 (UTC)"
                              },
                              "coupon_name": {
                                "type": "string",
                                "nullable": true,
                                "description": "優惠券名稱"
                              },
                              "coupon_code": {
                                "type": "string",
                                "nullable": true,
                                "description": "優惠券代碼"
                              }
                            },
                            "required": [
                              "id",
                              "order_id",
                              "coupon_id",
                              "coupon_code_id",
                              "user_id",
                              "redeemed_at",
                              "amount_applied_twd",
                              "created_at",
                              "updated_at",
                              "coupon_name",
                              "coupon_code"
                            ]
                          },
                          "description": "優惠券兌換紀錄列表"
                        }
                      },
                      "required": [
                        "id",
                        "order_number",
                        "user_id",
                        "subtotal_twd",
                        "discount_twd",
                        "total_twd",
                        "status",
                        "created_at",
                        "updated_at",
                        "created_at_taipei",
                        "updated_at_taipei",
                        "order_items",
                        "coupon_redemptions"
                      ],
                      "description": "建立的訂單資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "使用者或產品不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "409": {
            "description": "優惠券不可用或訂單項目重複",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/{id}": {
      "get": {
        "tags": [
          "Orders"
        ],
        "summary": "取得訂單詳細資訊",
        "description": "根據訂單 ID 取得詳細資訊，包含訂單項目和優惠券兌換紀錄",
        "operationId": "Orders_Get",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "訂單 ID"
            },
            "required": true,
            "description": "訂單 ID",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "成功取得訂單詳細資訊",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "訂單 ID"
                        },
                        "order_number": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 50,
                          "description": "訂單編號"
                        },
                        "user_id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "使用者 ID"
                        },
                        "subtotal_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "小計 (元)"
                        },
                        "discount_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "折扣金額 (元)"
                        },
                        "total_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總金額 (元)"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "created",
                            "confirmed",
                            "paid",
                            "cancelled"
                          ],
                          "description": "訂單狀態"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        },
                        "created_at_taipei": {
                          "type": "string",
                          "description": "建立時間 (台北時間)"
                        },
                        "updated_at_taipei": {
                          "type": "string",
                          "description": "更新時間 (台北時間)"
                        },
                        "order_items": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "訂單項目 ID"
                              },
                              "order_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "訂單 ID"
                              },
                              "product_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "產品 ID"
                              },
                              "product_name_snapshot": {
                                "type": "string",
                                "nullable": true,
                                "description": "下單時產品名稱快照"
                              },
                              "quantity": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "數量"
                              },
                              "unit_price_twd": {
                                "type": "integer",
                                "minimum": 0,
                                "description": "單價 (元)"
                              },
                              "total_twd": {
                                "type": "integer",
                                "minimum": 0,
                                "description": "小計 (元)"
                              },
                              "created_at": {
                                "type": "string",
                                "description": "建立時間 (UTC)"
                              },
                              "updated_at": {
                                "type": "string",
                                "description": "更新時間 (UTC)"
                              }
                            },
                            "required": [
                              "id",
                              "order_id",
                              "product_id",
                              "product_name_snapshot",
                              "quantity",
                              "unit_price_twd",
                              "total_twd",
                              "created_at",
                              "updated_at"
                            ]
                          },
                          "description": "訂單項目列表"
                        },
                        "coupon_redemptions": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "兌換紀錄 ID"
                              },
                              "order_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "訂單 ID"
                              },
                              "coupon_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "優惠券 ID"
                              },
                              "coupon_code_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "優惠券代碼 ID"
                              },
                              "user_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "使用者 ID"
                              },
                              "redeemed_at": {
                                "type": "string",
                                "description": "兌換時間 (UTC)"
                              },
                              "amount_applied_twd": {
                                "type": "integer",
                                "minimum": 0,
                                "description": "實際折扣金額 (元)"
                              },
                              "created_at": {
                                "type": "string",
                                "description": "建立時間 (UTC)"
                              },
                              "updated_at": {
                                "type": "string",
                                "description": "更新時間 (UTC)"
                              },
                              "coupon_name": {
                                "type": "string",
                                "nullable": true,
                                "description": "優惠券名稱"
                              },
                              "coupon_code": {
                                "type": "string",
                                "nullable": true,
                                "description": "優惠券代碼"
                              }
                            },
                            "required": [
                              "id",
                              "order_id",
                              "coupon_id",
                              "coupon_code_id",
                              "user_id",
                              "redeemed_at",
                              "amount_applied_twd",
                              "created_at",
                              "updated_at",
                              "coupon_name",
                              "coupon_code"
                            ]
                          },
                          "description": "優惠券兌換紀錄列表"
                        }
                      },
                      "required": [
                        "id",
                        "order_number",
                        "user_id",
                        "subtotal_twd",
                        "discount_twd",
                        "total_twd",
                        "status",
                        "created_at",
                        "updated_at",
                        "created_at_taipei",
                        "updated_at_taipei",
                        "order_items",
                        "coupon_redemptions"
                      ],
                      "description": "訂單詳細資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "訂單不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/{id}/status": {
      "put": {
        "tags": [
          "Orders"
        ],
        "summary": "更新訂單狀態",
        "description": "更新訂單狀態",
        "operationId": "Orders_UpdateStatus",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "訂單 ID"
            },
            "required": true,
            "description": "訂單 ID",
            "name": "id",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "created",
                      "confirmed",
                      "paid",
                      "cancelled"
                    ],
                    "description": "訂單狀態"
                  }
                },
                "required": [
                  "status"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "成功更新訂單狀態",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "訂單 ID"
                        },
                        "order_number": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 50,
                          "description": "訂單編號"
                        },
                        "user_id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "使用者 ID"
                        },
                        "subtotal_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "小計 (元)"
                        },
                        "discount_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "折扣金額 (元)"
                        },
                        "total_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總金額 (元)"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "created",
                            "confirmed",
                            "paid",
                            "cancelled"
                          ],
                          "description": "訂單狀態"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        },
                        "created_at_taipei": {
                          "type": "string",
                          "description": "建立時間 (台北時間)"
                        },
                        "updated_at_taipei": {
                          "type": "string",
                          "description": "更新時間 (台北時間)"
                        },
                        "order_items": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "訂單項目 ID"
                              },
                              "order_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "訂單 ID"
                              },
                              "product_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "產品 ID"
                              },
                              "product_name_snapshot": {
                                "type": "string",
                                "nullable": true,
                                "description": "下單時產品名稱快照"
                              },
                              "quantity": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "數量"
                              },
                              "unit_price_twd": {
                                "type": "integer",
                                "minimum": 0,
                                "description": "單價 (元)"
                              },
                              "total_twd": {
                                "type": "integer",
                                "minimum": 0,
                                "description": "小計 (元)"
                              },
                              "created_at": {
                                "type": "string",
                                "description": "建立時間 (UTC)"
                              },
                              "updated_at": {
                                "type": "string",
                                "description": "更新時間 (UTC)"
                              }
                            },
                            "required": [
                              "id",
                              "order_id",
                              "product_id",
                              "product_name_snapshot",
                              "quantity",
                              "unit_price_twd",
                              "total_twd",
                              "created_at",
                              "updated_at"
                            ]
                          },
                          "description": "訂單項目列表"
                        },
                        "coupon_redemptions": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "兌換紀錄 ID"
                              },
                              "order_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "訂單 ID"
                              },
                              "coupon_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "優惠券 ID"
                              },
                              "coupon_code_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "優惠券代碼 ID"
                              },
                              "user_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "使用者 ID"
                              },
                              "redeemed_at": {
                                "type": "string",
                                "description": "兌換時間 (UTC)"
                              },
                              "amount_applied_twd": {
                                "type": "integer",
                                "minimum": 0,
                                "description": "實際折扣金額 (元)"
                              },
                              "created_at": {
                                "type": "string",
                                "description": "建立時間 (UTC)"
                              },
                              "updated_at": {
                                "type": "string",
                                "description": "更新時間 (UTC)"
                              },
                              "coupon_name": {
                                "type": "string",
                                "nullable": true,
                                "description": "優惠券名稱"
                              },
                              "coupon_code": {
                                "type": "string",
                                "nullable": true,
                                "description": "優惠券代碼"
                              }
                            },
                            "required": [
                              "id",
                              "order_id",
                              "coupon_id",
                              "coupon_code_id",
                              "user_id",
                              "redeemed_at",
                              "amount_applied_twd",
                              "created_at",
                              "updated_at",
                              "coupon_name",
                              "coupon_code"
                            ]
                          },
                          "description": "優惠券兌換紀錄列表"
                        }
                      },
                      "required": [
                        "id",
                        "order_number",
                        "user_id",
                        "subtotal_twd",
                        "discount_twd",
                        "total_twd",
                        "status",
                        "created_at",
                        "updated_at",
                        "created_at_taipei",
                        "updated_at_taipei",
                        "order_items",
                        "coupon_redemptions"
                      ],
                      "description": "訂單詳細資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "訂單不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/{id}/cancel": {
      "put": {
        "tags": [
          "Orders"
        ],
        "summary": "取消訂單",
        "description": "取消訂單",
        "operationId": "Orders_Cancel",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "訂單 ID"
            },
            "required": true,
            "description": "訂單 ID",
            "name": "id",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "成功取消訂單",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "訂單 ID"
                        },
                        "order_number": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 50,
                          "description": "訂單編號"
                        },
                        "user_id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "使用者 ID"
                        },
                        "subtotal_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "小計 (元)"
                        },
                        "discount_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "折扣金額 (元)"
                        },
                        "total_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總金額 (元)"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "created",
                            "confirmed",
                            "paid",
                            "cancelled"
                          ],
                          "description": "訂單狀態"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        },
                        "created_at_taipei": {
                          "type": "string",
                          "description": "建立時間 (台北時間)"
                        },
                        "updated_at_taipei": {
                          "type": "string",
                          "description": "更新時間 (台北時間)"
                        },
                        "order_items": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "訂單項目 ID"
                              },
                              "order_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "訂單 ID"
                              },
                              "product_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "產品 ID"
                              },
                              "product_name_snapshot": {
                                "type": "string",
                                "nullable": true,
                                "description": "下單時產品名稱快照"
                              },
                              "quantity": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "數量"
                              },
                              "unit_price_twd": {
                                "type": "integer",
                                "minimum": 0,
                                "description": "單價 (元)"
                              },
                              "total_twd": {
                                "type": "integer",
                                "minimum": 0,
                                "description": "小計 (元)"
                              },
                              "created_at": {
                                "type": "string",
                                "description": "建立時間 (UTC)"
                              },
                              "updated_at": {
                                "type": "string",
                                "description": "更新時間 (UTC)"
                              }
                            },
                            "required": [
                              "id",
                              "order_id",
                              "product_id",
                              "product_name_snapshot",
                              "quantity",
                              "unit_price_twd",
                              "total_twd",
                              "created_at",
                              "updated_at"
                            ]
                          },
                          "description": "訂單項目列表"
                        },
                        "coupon_redemptions": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "兌換紀錄 ID"
                              },
                              "order_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "訂單 ID"
                              },
                              "coupon_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "優惠券 ID"
                              },
                              "coupon_code_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "優惠券代碼 ID"
                              },
                              "user_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "使用者 ID"
                              },
                              "redeemed_at": {
                                "type": "string",
                                "description": "兌換時間 (UTC)"
                              },
                              "amount_applied_twd": {
                                "type": "integer",
                                "minimum": 0,
                                "description": "實際折扣金額 (元)"
                              },
                              "created_at": {
                                "type": "string",
                                "description": "建立時間 (UTC)"
                              },
                              "updated_at": {
                                "type": "string",
                                "description": "更新時間 (UTC)"
                              },
                              "coupon_name": {
                                "type": "string",
                                "nullable": true,
                                "description": "優惠券名稱"
                              },
                              "coupon_code": {
                                "type": "string",
                                "nullable": true,
                                "description": "優惠券代碼"
                              }
                            },
                            "required": [
                              "id",
                              "order_id",
                              "coupon_id",
                              "coupon_code_id",
                              "user_id",
                              "redeemed_at",
                              "amount_applied_twd",
                              "created_at",
                              "updated_at",
                              "coupon_name",
                              "coupon_code"
                            ]
                          },
                          "description": "優惠券兌換紀錄列表"
                        }
                      },
                      "required": [
                        "id",
                        "order_number",
                        "user_id",
                        "subtotal_twd",
                        "discount_twd",
                        "total_twd",
                        "status",
                        "created_at",
                        "updated_at",
                        "created_at_taipei",
                        "updated_at_taipei",
                        "order_items",
                        "coupon_redemptions"
                      ],
                      "description": "訂單詳細資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "訂單不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/number/{orderNumber}": {
      "get": {
        "tags": [
          "Orders"
        ],
        "summary": "根據訂單編號取得訂單",
        "description": "根據訂單編號取得訂單詳細資訊",
        "operationId": "Orders_GetByNumber",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "minLength": 1,
              "maxLength": 50,
              "description": "訂單編號"
            },
            "required": true,
            "description": "訂單編號",
            "name": "orderNumber",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "成功取得訂單詳細資訊",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "訂單 ID"
                        },
                        "order_number": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 50,
                          "description": "訂單編號"
                        },
                        "user_id": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "使用者 ID"
                        },
                        "subtotal_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "小計 (元)"
                        },
                        "discount_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "折扣金額 (元)"
                        },
                        "total_twd": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總金額 (元)"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "created",
                            "confirmed",
                            "paid",
                            "cancelled"
                          ],
                          "description": "訂單狀態"
                        },
                        "created_at": {
                          "type": "string",
                          "description": "建立時間 (UTC)"
                        },
                        "updated_at": {
                          "type": "string",
                          "description": "更新時間 (UTC)"
                        },
                        "created_at_taipei": {
                          "type": "string",
                          "description": "建立時間 (台北時間)"
                        },
                        "updated_at_taipei": {
                          "type": "string",
                          "description": "更新時間 (台北時間)"
                        },
                        "order_items": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "訂單項目 ID"
                              },
                              "order_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "訂單 ID"
                              },
                              "product_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "產品 ID"
                              },
                              "product_name_snapshot": {
                                "type": "string",
                                "nullable": true,
                                "description": "下單時產品名稱快照"
                              },
                              "quantity": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "數量"
                              },
                              "unit_price_twd": {
                                "type": "integer",
                                "minimum": 0,
                                "description": "單價 (元)"
                              },
                              "total_twd": {
                                "type": "integer",
                                "minimum": 0,
                                "description": "小計 (元)"
                              },
                              "created_at": {
                                "type": "string",
                                "description": "建立時間 (UTC)"
                              },
                              "updated_at": {
                                "type": "string",
                                "description": "更新時間 (UTC)"
                              }
                            },
                            "required": [
                              "id",
                              "order_id",
                              "product_id",
                              "product_name_snapshot",
                              "quantity",
                              "unit_price_twd",
                              "total_twd",
                              "created_at",
                              "updated_at"
                            ]
                          },
                          "description": "訂單項目列表"
                        },
                        "coupon_redemptions": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "兌換紀錄 ID"
                              },
                              "order_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "訂單 ID"
                              },
                              "coupon_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "優惠券 ID"
                              },
                              "coupon_code_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "優惠券代碼 ID"
                              },
                              "user_id": {
                                "type": "integer",
                                "minimum": 0,
                                "exclusiveMinimum": true,
                                "description": "使用者 ID"
                              },
                              "redeemed_at": {
                                "type": "string",
                                "description": "兌換時間 (UTC)"
                              },
                              "amount_applied_twd": {
                                "type": "integer",
                                "minimum": 0,
                                "description": "實際折扣金額 (元)"
                              },
                              "created_at": {
                                "type": "string",
                                "description": "建立時間 (UTC)"
                              },
                              "updated_at": {
                                "type": "string",
                                "description": "更新時間 (UTC)"
                              },
                              "coupon_name": {
                                "type": "string",
                                "nullable": true,
                                "description": "優惠券名稱"
                              },
                              "coupon_code": {
                                "type": "string",
                                "nullable": true,
                                "description": "優惠券代碼"
                              }
                            },
                            "required": [
                              "id",
                              "order_id",
                              "coupon_id",
                              "coupon_code_id",
                              "user_id",
                              "redeemed_at",
                              "amount_applied_twd",
                              "created_at",
                              "updated_at",
                              "coupon_name",
                              "coupon_code"
                            ]
                          },
                          "description": "優惠券兌換紀錄列表"
                        }
                      },
                      "required": [
                        "id",
                        "order_number",
                        "user_id",
                        "subtotal_twd",
                        "discount_twd",
                        "total_twd",
                        "status",
                        "created_at",
                        "updated_at",
                        "created_at_taipei",
                        "updated_at_taipei",
                        "order_items",
                        "coupon_redemptions"
                      ],
                      "description": "訂單詳細資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "訂單不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/users/{userId}/orders": {
      "get": {
        "tags": [
          "Orders"
        ],
        "summary": "取得使用者的訂單列表",
        "description": "取得指定使用者的訂單列表",
        "operationId": "Orders_GetByUser",
        "parameters": [
          {
            "schema": {
              "type": "integer",
              "minimum": 0,
              "exclusiveMinimum": true,
              "description": "使用者 ID"
            },
            "required": true,
            "description": "使用者 ID",
            "name": "userId",
            "in": "path"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "description": "頁碼 (從 1 開始)"
            },
            "required": false,
            "description": "頁碼 (從 1 開始)",
            "name": "page",
            "in": "query"
          },
          {
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "description": "每頁筆數 (1-100)"
            },
            "required": false,
            "description": "每頁筆數 (1-100)",
            "name": "limit",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "id",
                "order_number",
                "user_id",
                "subtotal_twd",
                "discount_twd",
                "total_twd",
                "status",
                "created_at",
                "updated_at"
              ],
              "default": "id",
              "description": "排序欄位"
            },
            "required": false,
            "description": "排序欄位",
            "name": "sortBy",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc",
              "description": "排序方向"
            },
            "required": false,
            "description": "排序方向",
            "name": "sortDir",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "enum": [
                "created",
                "confirmed",
                "paid",
                "cancelled"
              ],
              "description": "訂單狀態篩選"
            },
            "required": false,
            "description": "訂單狀態篩選",
            "name": "status",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "建立時間起始 (台北時間)"
            },
            "required": false,
            "description": "建立時間起始 (台北時間)",
            "name": "from",
            "in": "query"
          },
          {
            "schema": {
              "type": "string",
              "description": "建立時間結束 (台北時間)"
            },
            "required": false,
            "description": "建立時間結束 (台北時間)",
            "name": "to",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "成功取得使用者訂單列表",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "訂單 ID"
                          },
                          "order_number": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 50,
                            "description": "訂單編號"
                          },
                          "user_id": {
                            "type": "integer",
                            "minimum": 0,
                            "exclusiveMinimum": true,
                            "description": "使用者 ID"
                          },
                          "subtotal_twd": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "小計 (元)"
                          },
                          "discount_twd": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "折扣金額 (元)"
                          },
                          "total_twd": {
                            "type": "integer",
                            "minimum": 0,
                            "description": "總金額 (元)"
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "created",
                              "confirmed",
                              "paid",
                              "cancelled"
                            ],
                            "description": "訂單狀態"
                          },
                          "created_at": {
                            "type": "string",
                            "description": "建立時間 (UTC)"
                          },
                          "updated_at": {
                            "type": "string",
                            "description": "更新時間 (UTC)"
                          },
                          "created_at_taipei": {
                            "type": "string",
                            "description": "建立時間 (台北時間)"
                          },
                          "updated_at_taipei": {
                            "type": "string",
                            "description": "更新時間 (台北時間)"
                          }
                        },
                        "required": [
                          "id",
                          "order_number",
                          "user_id",
                          "subtotal_twd",
                          "discount_twd",
                          "total_twd",
                          "status",
                          "created_at",
                          "updated_at",
                          "created_at_taipei",
                          "updated_at_taipei"
                        ]
                      },
                      "description": "訂單列表"
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "當前頁碼"
                        },
                        "limit": {
                          "type": "integer",
                          "minimum": 0,
                          "exclusiveMinimum": true,
                          "description": "每頁筆數"
                        },
                        "total": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總筆數"
                        },
                        "total_pages": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "總頁數"
                        }
                      },
                      "required": [
                        "page",
                        "limit",
                        "total",
                        "total_pages"
                      ],
                      "description": "分頁資訊"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "pagination",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/orders/stats/today": {
      "get": {
        "tags": [
          "Orders"
        ],
        "summary": "取得今日訂單統計",
        "description": "取得今日訂單數量統計",
        "operationId": "Orders_GetTodayStats",
        "responses": {
          "200": {
            "description": "成功取得今日訂單統計",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "todayOrderCount": {
                          "type": "integer",
                          "minimum": 0,
                          "description": "今日訂單數量"
                        }
                      },
                      "required": [
                        "todayOrderCount"
                      ]
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/uploads/products": {
      "post": {
        "tags": [
          "Uploads"
        ],
        "summary": "上傳產品圖片",
        "description": "上傳 WebP 格式的產品圖片到本地檔案系統",
        "operationId": "Uploads_ProductImage_Local",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "nullable": true,
                    "description": "WebP 檔案（檔案上傳）"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "成功上傳圖片",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "key": {
                          "type": "string",
                          "description": "檔案 key"
                        },
                        "public_url": {
                          "type": "string",
                          "format": "uri",
                          "description": "公開 URL（如果有設定）"
                        }
                      },
                      "required": [
                        "key"
                      ],
                      "description": "上傳結果"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "data",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "請求參數錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/assets/{key}": {
      "get": {
        "tags": [
          "Assets"
        ],
        "summary": "取得檔案",
        "description": "透過代理讀取 R2 儲存桶中的檔案",
        "operationId": "Assets_GetFile",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "檔案 key"
            },
            "required": true,
            "description": "檔案 key",
            "name": "key",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "成功取得檔案",
            "content": {
              "image/webp": {
                "schema": {
                  "type": "string",
                  "description": "WebP 圖片內容"
                }
              },
              "image/jpeg": {
                "schema": {
                  "type": "string",
                  "description": "JPEG 圖片內容"
                }
              },
              "image/png": {
                "schema": {
                  "type": "string",
                  "description": "PNG 圖片內容"
                }
              },
              "application/octet-stream": {
                "schema": {
                  "type": "string",
                  "description": "檔案內容"
                }
              }
            }
          },
          "404": {
            "description": "檔案不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Assets"
        ],
        "summary": "刪除檔案",
        "description": "刪除 R2 儲存桶中的檔案",
        "operationId": "Assets_DeleteFile",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "description": "檔案 key"
            },
            "required": true,
            "description": "檔案 key",
            "name": "key",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "成功刪除檔案",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "操作是否成功"
                    },
                    "message": {
                      "type": "string",
                      "description": "刪除成功訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "回應時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "message",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "404": {
            "description": "檔案不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/assets/*": {
      "get": {
        "tags": [
          "Assets"
        ],
        "summary": "取得檔案",
        "description": "透過代理讀取本地檔案系統中的檔案",
        "operationId": "Assets_GetFile_Local",
        "responses": {
          "200": {
            "description": "成功取得檔案",
            "content": {
              "image/webp": {
                "schema": {
                  "type": "string",
                  "description": "WebP 圖片內容"
                }
              },
              "image/jpeg": {
                "schema": {
                  "type": "string",
                  "description": "JPEG 圖片內容"
                }
              },
              "image/png": {
                "schema": {
                  "type": "string",
                  "description": "PNG 圖片內容"
                }
              },
              "image/gif": {
                "schema": {
                  "type": "string",
                  "description": "GIF 圖片內容"
                }
              },
              "application/octet-stream": {
                "schema": {
                  "type": "string",
                  "description": "檔案內容"
                }
              }
            }
          },
          "404": {
            "description": "檔案不存在",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          },
          "500": {
            "description": "伺服器錯誤",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "enum": [
                        false
                      ],
                      "description": "操作失敗"
                    },
                    "error": {
                      "type": "string",
                      "description": "錯誤訊息"
                    },
                    "timestamp": {
                      "type": "string",
                      "description": "錯誤時間戳"
                    }
                  },
                  "required": [
                    "success",
                    "error",
                    "timestamp"
                  ]
                }
              }
            }
          }
        }
      }
    }
  }
}