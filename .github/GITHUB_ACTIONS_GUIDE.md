# GitHub Actions éƒ¨ç½²æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬å°ˆæ¡ˆä½¿ç”¨ GitHub Actions å¯¦ç¾è‡ªå‹•åŒ– CI/CD æµç¨‹ï¼ŒåŒ…å«ï¼š

- âœ… **CI å“è³ªæª¢æŸ¥**ï¼šè‡ªå‹•åŸ·è¡Œ Lintã€TypeScript æª¢æŸ¥ã€æ¸¬è©¦
- ğŸ” **éƒ¨ç½²å‰å¯©æ ¸**ï¼šStaging èˆ‡ Production éƒ¨ç½²éœ€è¦äººå·¥å¯©æ ¸
- ğŸš€ **è‡ªå‹•éƒ¨ç½²**ï¼šå¯©æ ¸é€šéå¾Œè‡ªå‹•éƒ¨ç½²åˆ° Cloudflare Workers èˆ‡ Pages

---

## ğŸ—ï¸ å·¥ä½œæµç¨‹æ¶æ§‹

### 1. CI å“è³ªæª¢æŸ¥ (`ci.yml`)

**è§¸ç™¼æ™‚æ©Ÿ**ï¼š
- Pull Request åˆ° `main` æˆ– `develop` åˆ†æ”¯
- Push åˆ° `main` æˆ– `develop` åˆ†æ”¯

**åŸ·è¡Œå…§å®¹**ï¼š
- ESLint æª¢æŸ¥ï¼ˆå‰ç«¯ + å¾Œç«¯ï¼‰
- TypeScript å‹åˆ¥æª¢æŸ¥
- OpenAPI æ–‡æª”ç”Ÿæˆèˆ‡é©—è­‰
- å–®å…ƒæ¸¬è©¦èˆ‡æ•´åˆæ¸¬è©¦
- å‰ç«¯å»ºç½®æª¢æŸ¥

### 2. Staging éƒ¨ç½² (`deploy-staging.yml`)

**è§¸ç™¼æ–¹å¼**ï¼šæ‰‹å‹•è§¸ç™¼ï¼ˆ`workflow_dispatch`ï¼‰

**å¯©æ ¸æµç¨‹**ï¼š
```
è§¸ç™¼éƒ¨ç½² â†’ ç­‰å¾…å¯©æ ¸ â†’ å“è³ªæª¢æŸ¥ â†’ éƒ¨ç½²å¾Œç«¯ â†’ éƒ¨ç½²å‰ç«¯ â†’ é€šçŸ¥
```

**å¯©æ ¸å±¤ç´š**ï¼š
- 1 å±¤å¯©æ ¸ï¼ˆæŠ€è¡“è² è²¬äººï¼‰

### 3. Production éƒ¨ç½² (`deploy-production.yml`)

**è§¸ç™¼æ–¹å¼**ï¼šæ‰‹å‹•è§¸ç™¼ï¼ˆ`workflow_dispatch`ï¼‰

**å¯©æ ¸æµç¨‹**ï¼š
```
è§¸ç™¼éƒ¨ç½² â†’ ç¬¬ä¸€å±¤å¯©æ ¸ â†’ ç¬¬äºŒå±¤å¯©æ ¸ â†’ å“è³ªæª¢æŸ¥ â†’ éƒ¨ç½²å¾Œç«¯ â†’ éƒ¨ç½²å‰ç«¯ â†’ å»ºç«‹ Git Tag â†’ é€šçŸ¥
```

**å¯©æ ¸å±¤ç´š**ï¼š
- ç¬¬ä¸€å±¤ï¼šæŠ€è¡“è² è²¬äºº
- ç¬¬äºŒå±¤ï¼šå°ˆæ¡ˆè² è²¬äºº

---

## ğŸ”§ åˆå§‹è¨­å®š

### æ­¥é©Ÿ 1ï¼šè¨­å®š GitHub Secrets

åœ¨ GitHub Repository â†’ **Settings** â†’ **Secrets and variables** â†’ **Actions**ï¼Œæ–°å¢ä»¥ä¸‹ Secretsï¼š

| Secret åç¨± | èªªæ˜ | å¦‚ä½•å–å¾— |
|------------|------|---------|
| `CLOUDFLARE_API_TOKEN` | Cloudflare API Token | 1. ç™»å…¥ Cloudflare Dashboard<br>2. é€²å…¥ **My Profile** â†’ **API Tokens**<br>3. é»æ“Š **Create Token**<br>4. é¸æ“‡ **Edit Cloudflare Workers** æ¨¡æ¿<br>5. æ¬Šé™ï¼š`Account.Cloudflare Workers Scripts:Edit`, `Account.Cloudflare Pages:Edit`, `Account.D1:Edit`, `Account.R2:Edit`<br>6. è¤‡è£½ Token |
| `CLOUDFLARE_ACCOUNT_ID` | Cloudflare Account ID | 1. ç™»å…¥ Cloudflare Dashboard<br>2. åœ¨å³å´å¯çœ‹åˆ° **Account ID**<br>3. æˆ–åŸ·è¡Œ `wrangler whoami` æŸ¥çœ‹ |

**å»ºç«‹ API Token çš„å®Œæ•´æ¬Šé™è¨­å®š**ï¼š
```
Token name: GitHub Actions Deploy
Permissions:
  - Account > Workers Scripts > Edit
  - Account > Cloudflare Pages > Edit
  - Account > D1 > Edit
  - Account > Account Settings > Read
  - Zone > Workers Routes > Edit (å¦‚éœ€è‡ªè¨‚åŸŸå)
Account Resources: Include > <Your Account>
```

### æ­¥é©Ÿ 2ï¼šè¨­å®š GitHub Environments

åœ¨ GitHub Repository â†’ **Settings** â†’ **Environments**ï¼Œå»ºç«‹ä»¥ä¸‹ç’°å¢ƒï¼š

#### **staging-approval**ï¼ˆStaging å¯©æ ¸ç’°å¢ƒï¼‰
- é»æ“Š **New environment**
- åç¨±ï¼š`staging-approval`
- è¨­å®šï¼š
  - âœ… **Required reviewers**ï¼šå‹¾é¸ï¼Œæ–°å¢ 1 ä½å¯©æ ¸è€…ï¼ˆæŠ€è¡“è² è²¬äººï¼‰
  - â±ï¸ **Wait timer**ï¼š0 åˆ†é˜
  - ğŸ”’ **Deployment branches**ï¼šAll branchesï¼ˆæˆ–é™åˆ¶ç‰¹å®šåˆ†æ”¯ï¼‰

#### **staging**ï¼ˆStaging éƒ¨ç½²ç’°å¢ƒï¼‰
- åç¨±ï¼š`staging`
- è¨­å®šï¼š
  - ğŸŒ **Environment URL**ï¼š`https://pos-frontend-staging.pages.dev`
  - å…¶ä»–ä¿æŒé è¨­

#### **production-approval-tech**ï¼ˆProduction ç¬¬ä¸€å±¤å¯©æ ¸ï¼‰
- åç¨±ï¼š`production-approval-tech`
- è¨­å®šï¼š
  - âœ… **Required reviewers**ï¼šå‹¾é¸ï¼Œæ–°å¢ 1 ä½å¯©æ ¸è€…ï¼ˆæŠ€è¡“è² è²¬äººï¼‰
  - â±ï¸ **Wait timer**ï¼š0 åˆ†é˜

#### **production-approval-pm**ï¼ˆProduction ç¬¬äºŒå±¤å¯©æ ¸ï¼‰
- åç¨±ï¼š`production-approval-pm`
- è¨­å®šï¼š
  - âœ… **Required reviewers**ï¼šå‹¾é¸ï¼Œæ–°å¢ 1 ä½å¯©æ ¸è€…ï¼ˆå°ˆæ¡ˆè² è²¬äººï¼‰
  - â±ï¸ **Wait timer**ï¼š0 åˆ†é˜

#### **production**ï¼ˆProduction éƒ¨ç½²ç’°å¢ƒï¼‰
- åç¨±ï¼š`production`
- è¨­å®šï¼š
  - ğŸŒ **Environment URL**ï¼š`https://pos-frontend-prod.pages.dev`
  - å…¶ä»–ä¿æŒé è¨­

### æ­¥é©Ÿ 3ï¼šå»ºç«‹ Production è³‡æº

åœ¨éƒ¨ç½²åˆ° Production å‰ï¼Œéœ€è¦å…ˆå»ºç«‹ Cloudflare è³‡æºï¼š

```bash
# 1. å»ºç«‹ Production D1 Database
wrangler d1 create pos-db-prod

# è¨˜éŒ„è¼¸å‡ºçš„ database_idï¼Œä¾‹å¦‚ï¼š
# database_id = "abc123-def456-ghi789"

# 2. æ›´æ–° wrangler.toml
# å°‡ REPLACE_WITH_PROD_D1_DATABASE_ID æ›¿æ›ç‚ºå¯¦éš›çš„ database_id

# 3. å»ºç«‹ Production R2 Bucket
wrangler r2 bucket create pos-assets-prod

# 4. åŸ·è¡Œ Production Migrations
cd packages/backend
pnpm run d1:migrate:production

# 5. ï¼ˆé¸ç”¨ï¼‰åŒ¯å…¥åˆå§‹è³‡æ–™
pnpm run d1:seed:production
```

### æ­¥é©Ÿ 4ï¼šæ›´æ–° CODEOWNERS

ç·¨è¼¯ `.github/CODEOWNERS`ï¼Œå°‡ `@your-username` æ›¿æ›ç‚ºå¯¦éš›çš„ GitHub ä½¿ç”¨è€…åç¨±ï¼š

```bash
# ç¯„ä¾‹ï¼š
* @alice @bob
/packages/backend/ @alice
/packages/frontend/ @bob
```

---

## ğŸ“– ä½¿ç”¨æ–¹å¼

### 1. CI è‡ªå‹•æª¢æŸ¥ï¼ˆPull Requestï¼‰

ç•¶å»ºç«‹ PR æˆ– Push åˆ° `main`/`develop` æ™‚ï¼Œæœƒè‡ªå‹•è§¸ç™¼ CI æª¢æŸ¥ï¼š

```bash
# å»ºç«‹åŠŸèƒ½åˆ†æ”¯
git checkout -b feature/new-feature

# é–‹ç™¼èˆ‡æäº¤
git add .
git commit -m "feat: æ–°å¢åŠŸèƒ½"
git push origin feature/new-feature

# åœ¨ GitHub å»ºç«‹ PR â†’ è‡ªå‹•åŸ·è¡Œ CI
```

**æª¢æŸ¥é …ç›®**ï¼š
- âœ… ESLint
- âœ… TypeScript å‹åˆ¥æª¢æŸ¥
- âœ… OpenAPI ç”Ÿæˆèˆ‡é©—è­‰
- âœ… å–®å…ƒæ¸¬è©¦
- âœ… å‰ç«¯å»ºç½®

### 2. éƒ¨ç½²åˆ° Staging

**æ­¥é©Ÿ**ï¼š

1. é€²å…¥ GitHub Repository â†’ **Actions** é é¢
2. é¸æ“‡ **Deploy to Staging** å·¥ä½œæµç¨‹
3. é»æ“Š **Run workflow**
4. å¡«å¯«ï¼š
   - **Branch**ï¼šé¸æ“‡è¦éƒ¨ç½²çš„åˆ†æ”¯ï¼ˆé€šå¸¸æ˜¯ `main` æˆ– `develop`ï¼‰
   - **éƒ¨ç½²åŸå› **ï¼šä¾‹å¦‚ã€Œä¿®å¾©è¨‚å–®è¨ˆç®—éŒ¯èª¤ã€
5. é»æ“Š **Run workflow**
6. **ç­‰å¾…å¯©æ ¸**ï¼šå¯©æ ¸è€…æœƒæ”¶åˆ°é€šçŸ¥
7. å¯©æ ¸è€…æ‰¹å‡†å¾Œï¼Œè‡ªå‹•åŸ·è¡Œéƒ¨ç½²

**å¯©æ ¸è€…æ“ä½œ**ï¼š
1. æ”¶åˆ° Email é€šçŸ¥æˆ–åœ¨ GitHub Actions é é¢çœ‹åˆ°å¾…å¯©æ ¸
2. é»æ“Š **Review deployments**
3. å‹¾é¸ `staging-approval`
4. é»æ“Š **Approve and deploy**

**éƒ¨ç½²å®Œæˆå¾Œ**ï¼š
- å¾Œç«¯ï¼šhttps://pos-backend-staging.survey-api.workers.dev
- å‰ç«¯ï¼šhttps://pos-frontend-staging.pages.dev

### 3. éƒ¨ç½²åˆ° Production

**æ­¥é©Ÿ**ï¼š

1. é€²å…¥ GitHub Repository â†’ **Actions** é é¢
2. é¸æ“‡ **Deploy to Production** å·¥ä½œæµç¨‹
3. é»æ“Š **Run workflow**
4. å¡«å¯«ï¼š
   - **Branch**ï¼šé¸æ“‡è¦éƒ¨ç½²çš„åˆ†æ”¯ï¼ˆé€šå¸¸æ˜¯ `main`ï¼‰
   - **éƒ¨ç½²åŸå› **ï¼šä¾‹å¦‚ã€ŒRelease v1.2.0 - æ–°å¢å„ªæƒ åˆ¸åŠŸèƒ½ã€
   - **ç‰ˆæœ¬è™Ÿ**ï¼šä¾‹å¦‚ `v1.2.0`ï¼ˆæ ¼å¼å¿…é ˆç‚º `vX.Y.Z`ï¼‰
5. é»æ“Š **Run workflow**
6. **ç¬¬ä¸€å±¤å¯©æ ¸**ï¼šæŠ€è¡“è² è²¬äººå¯©æ ¸
7. **ç¬¬äºŒå±¤å¯©æ ¸**ï¼šå°ˆæ¡ˆè² è²¬äººå¯©æ ¸
8. å¯©æ ¸é€šéå¾Œï¼Œè‡ªå‹•åŸ·è¡Œéƒ¨ç½²
9. éƒ¨ç½²å®Œæˆå¾Œï¼Œè‡ªå‹•å»ºç«‹ Git Tag

**ç‰ˆæœ¬è™Ÿè¦å‰‡**ï¼š
- æ ¼å¼ï¼š`vX.Y.Z`ï¼ˆä¾‹å¦‚ï¼š`v1.0.0`ã€`v2.3.1`ï¼‰
- Xï¼šä¸»ç‰ˆæœ¬è™Ÿï¼ˆé‡å¤§è®Šæ›´ï¼‰
- Yï¼šæ¬¡ç‰ˆæœ¬è™Ÿï¼ˆæ–°åŠŸèƒ½ï¼‰
- Zï¼šä¿®è¨‚è™Ÿï¼ˆBug ä¿®å¾©ï¼‰

**éƒ¨ç½²å®Œæˆå¾Œ**ï¼š
- å¾Œç«¯ï¼šhttps://pos-backend-prod.survey-api.workers.dev
- å‰ç«¯ï¼šhttps://pos-frontend-prod.pages.dev
- Git Tagï¼šè‡ªå‹•å»ºç«‹ä¸¦æ¨é€åˆ° Repository

---

## ğŸ” ç›£æ§èˆ‡é©—è­‰

### æŸ¥çœ‹éƒ¨ç½²ç‹€æ…‹

1. **GitHub Actions é é¢**ï¼š
   - é€²å…¥ Repository â†’ **Actions**
   - æŸ¥çœ‹å„å€‹ Job çš„åŸ·è¡Œç‹€æ…‹
   - é»æ“Š Job æŸ¥çœ‹è©³ç´°æ—¥èªŒ

2. **Cloudflare Dashboard**ï¼š
   - **Workers**ï¼šæŸ¥çœ‹ Worker éƒ¨ç½²æ­·å²èˆ‡æ—¥èªŒ
   - **Pages**ï¼šæŸ¥çœ‹ Pages éƒ¨ç½²æ­·å²
   - **D1**ï¼šæŸ¥çœ‹è³‡æ–™åº«ç‹€æ…‹
   - **R2**ï¼šæŸ¥çœ‹å„²å­˜æ¡¶ä½¿ç”¨æƒ…æ³

### é©—è­‰éƒ¨ç½²

**å¾Œç«¯é©—è­‰**ï¼š
```bash
# Staging
curl https://pos-backend-staging.survey-api.workers.dev/health
curl https://pos-backend-staging.survey-api.workers.dev/version

# Production
curl https://pos-backend-prod.survey-api.workers.dev/health
curl https://pos-backend-prod.survey-api.workers.dev/version
```

**å‰ç«¯é©—è­‰**ï¼š
1. é–‹å•Ÿç€è¦½å™¨
2. è¨ªå•å‰ç«¯ URL
3. é–‹å•Ÿ DevToolsï¼ˆF12ï¼‰
4. æª¢æŸ¥ï¼š
   - âœ… ç„¡ Console éŒ¯èª¤
   - âœ… Network è«‹æ±‚æ­£å¸¸
   - âœ… API è«‹æ±‚æŒ‡å‘æ­£ç¢ºçš„å¾Œç«¯ URL

---

## ğŸš¨ æ•…éšœæ’é™¤

### å•é¡Œ 1ï¼šå¯©æ ¸é€šçŸ¥æœªæ”¶åˆ°

**è§£æ±ºæ–¹å¼**ï¼š
1. æª¢æŸ¥ GitHub é€šçŸ¥è¨­å®šï¼šSettings â†’ Notifications
2. ç¢ºèª Email åœ°å€å·²é©—è­‰
3. æ‰‹å‹•æª¢æŸ¥ï¼šRepository â†’ Actions â†’ é»æ“ŠåŸ·è¡Œä¸­çš„ Workflow

### å•é¡Œ 2ï¼šSecrets æœªè¨­å®šæˆ–éŒ¯èª¤

**éŒ¯èª¤è¨Šæ¯**ï¼š
```
Error: CLOUDFLARE_API_TOKEN is not set
```

**è§£æ±ºæ–¹å¼**ï¼š
1. æª¢æŸ¥ Secrets æ˜¯å¦å·²è¨­å®šï¼šSettings â†’ Secrets and variables â†’ Actions
2. ç¢ºèª Secret åç¨±æ‹¼å¯«æ­£ç¢ºï¼ˆå€åˆ†å¤§å°å¯«ï¼‰
3. é‡æ–°å»ºç«‹ Cloudflare API Tokenï¼Œç¢ºä¿æ¬Šé™æ­£ç¢º

### å•é¡Œ 3ï¼šD1 Database ID æœªè¨­å®š

**éŒ¯èª¤è¨Šæ¯**ï¼š
```
Error: Can't find D1 database with id "REPLACE_WITH_PROD_D1_DATABASE_ID"
```

**è§£æ±ºæ–¹å¼**ï¼š
1. åŸ·è¡Œ `wrangler d1 create pos-db-prod`
2. è¤‡è£½è¼¸å‡ºçš„ `database_id`
3. æ›´æ–° `packages/backend/wrangler.toml` ä¸­çš„ `database_id`
4. æäº¤ä¸¦æ¨é€è®Šæ›´

### å•é¡Œ 4ï¼šéƒ¨ç½²å¤±æ•— - å¥åº·æª¢æŸ¥éŒ¯èª¤

**éŒ¯èª¤è¨Šæ¯**ï¼š
```
curl: (22) The requested URL returned error: 404
```

**è§£æ±ºæ–¹å¼**ï¼š
1. æª¢æŸ¥ Worker æ˜¯å¦æˆåŠŸéƒ¨ç½²ï¼šCloudflare Dashboard â†’ Workers
2. æª¢æŸ¥ D1 Migrations æ˜¯å¦å·²åŸ·è¡Œ
3. æª¢æŸ¥ wrangler.toml ä¸­çš„ç’°å¢ƒè®Šæ•¸è¨­å®š
4. æŸ¥çœ‹ Cloudflare Workers æ—¥èªŒ

### å•é¡Œ 5ï¼šCORS éŒ¯èª¤

**éŒ¯èª¤è¨Šæ¯**ï¼ˆå‰ç«¯ Consoleï¼‰ï¼š
```
Access to fetch at 'https://...' has been blocked by CORS policy
```

**è§£æ±ºæ–¹å¼**ï¼š
1. æª¢æŸ¥ `wrangler.toml` ä¸­çš„ `CORS_ORIGINS` è¨­å®š
2. ç¢ºèªå‰ç«¯ URL å·²åŠ å…¥ CORS ç™½åå–®
3. é‡æ–°éƒ¨ç½²å¾Œç«¯

---

## ğŸ“Š å·¥ä½œæµç¨‹åœ–

### Staging éƒ¨ç½²æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰‹å‹•è§¸ç™¼éƒ¨ç½²         â”‚
â”‚ (å¡«å¯«éƒ¨ç½²åŸå› )       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç­‰å¾…å¯©æ ¸æ‰¹å‡†         â”‚ â—„â”€â”€ å¯©æ ¸è€…æ”¶åˆ°é€šçŸ¥
â”‚ (1 ä½æŠ€è¡“è² è²¬äºº)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éƒ¨ç½²å‰å“è³ªæª¢æŸ¥       â”‚
â”‚ - Preflight         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éƒ¨ç½²å¾Œç«¯åˆ° Staging   â”‚
â”‚ - Wrangler Deploy   â”‚
â”‚ - å¥åº·æª¢æŸ¥          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éƒ¨ç½²å‰ç«¯åˆ° Staging   â”‚
â”‚ - Build             â”‚
â”‚ - Pages Deploy      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç™¼é€éƒ¨ç½²é€šçŸ¥         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Production éƒ¨ç½²æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰‹å‹•è§¸ç™¼éƒ¨ç½²         â”‚
â”‚ (å¡«å¯«åŸå›  + ç‰ˆæœ¬è™Ÿ)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬ä¸€å±¤å¯©æ ¸           â”‚ â—„â”€â”€ æŠ€è¡“è² è²¬äºº
â”‚ (æŠ€è¡“è² è²¬äºº)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬äºŒå±¤å¯©æ ¸           â”‚ â—„â”€â”€ å°ˆæ¡ˆè² è²¬äºº
â”‚ (å°ˆæ¡ˆè² è²¬äºº)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éƒ¨ç½²å‰å“è³ªæª¢æŸ¥       â”‚
â”‚ - Preflight         â”‚
â”‚ - æ¸¬è©¦              â”‚
â”‚ - ç‰ˆæœ¬è™Ÿé©—è­‰        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éƒ¨ç½²å¾Œç«¯åˆ° Productionâ”‚
â”‚ - Wrangler Deploy   â”‚
â”‚ - å¥åº·æª¢æŸ¥          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éƒ¨ç½²å‰ç«¯åˆ° Productionâ”‚
â”‚ - Build             â”‚
â”‚ - Pages Deploy      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å»ºç«‹ Git Tag         â”‚
â”‚ (è‡ªå‹•æ¨é€)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç™¼é€éƒ¨ç½²é€šçŸ¥         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“š ç›¸é—œè³‡æº

- [GitHub Actions å®˜æ–¹æ–‡æª”](https://docs.github.com/en/actions)
- [Cloudflare Workers æ–‡æª”](https://developers.cloudflare.com/workers/)
- [Cloudflare Pages æ–‡æª”](https://developers.cloudflare.com/pages/)
- [Wrangler CLI æ–‡æª”](https://developers.cloudflare.com/workers/wrangler/)

---

## ğŸ” å®‰å…¨æ€§å»ºè­°

1. **å®šæœŸè¼ªæ› API Token**ï¼šå»ºè­°æ¯ 3-6 å€‹æœˆæ›´æ–°ä¸€æ¬¡
2. **æœ€å°æ¬Šé™åŸå‰‡**ï¼šAPI Token åªçµ¦äºˆå¿…è¦çš„æ¬Šé™
3. **å¯©æ ¸è€…è¨­å®š**ï¼šç¢ºä¿è‡³å°‘æœ‰ 2 ä½å¯©æ ¸è€…ï¼ˆé¿å…å–®é»æ•…éšœï¼‰
4. **åˆ†æ”¯ä¿è­·**ï¼šåœ¨ GitHub è¨­å®š Branch Protection Rules
5. **Secrets ç®¡ç†**ï¼šä¸è¦åœ¨ç¨‹å¼ç¢¼ä¸­ç¡¬ç·¨ç¢¼ä»»ä½•æ•æ„Ÿè³‡è¨Š

---

**ä½œè€…**ï¼šAI Assistant  
**æ—¥æœŸ**ï¼š2025-11-07  
**ç‰ˆæœ¬**ï¼š1.0.0

